{"version":3,"file":"test035.js","sources":["../../node_modules/@phaserjs/math-matrix2d/dist/Matrix2D.js","../../node_modules/@phaserjs/math-vec2/dist/Vec2.js","../../node_modules/@phaserjs/math-transform/dist/Transform.js","Bunny.ts","Texture.ts","MultiTexturedQuadShaderColor.ts","../../node_modules/@phaserjs/math-matrix4/dist/Matrix4.js","../../node_modules/@phaserjs/math-matrix4-funcs/dist/Ortho.js","bunnymark-nocolor.ts","test035.ts"],"sourcesContent":["//  A Matrix2D contains six elements in a short-form of the 3x3 Matrix, with the last column ignored.\r\n//  |----|----|----|\r\n//  | a  | b  | 0  |\r\n//  |----|----|----|\r\n//  | c  | d  | 0  |\r\n//  |----|----|----|\r\n//  | tx | ty | 1  |\r\n//  |----|----|----|\r\nexport class Matrix2D {\r\n    /**\r\n     * Creates an instance of Matrix2D.\r\n     *\r\n     * @param {number} [a=1] - X scale.\r\n     * @param {number} [b=0] - X skew.\r\n     * @param {number} [c=0] - Y skew.\r\n     * @param {number} [d=1] - Y scale.\r\n     * @param {number} [tx=0] - X translation\r\n     * @param {number} [ty=0] - Y translation\r\n     * @memberof Matrix2D\r\n     */\r\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\r\n        this.set(a, b, c, d, tx, ty);\r\n    }\r\n    set(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n        return this;\r\n    }\r\n    identity() {\r\n        return this.set();\r\n    }\r\n    toArray() {\r\n        return [this.a, this.b, this.c, this.d, this.tx, this.ty];\r\n    }\r\n    fromArray(src) {\r\n        return this.set(src[0], src[1], src[2], src[3], src[4], src[5]);\r\n    }\r\n    [Symbol.iterator]() {\r\n        const data = this.toArray();\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix2D.js.map","export class Vec2 {\r\n    /**\r\n     * Creates an instance of a Vector2.\r\n     *\r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @memberof Vec2\r\n     */\r\n    constructor(x = 0, y = 0) {\r\n        this.set(x, y);\r\n    }\r\n    /**\r\n     * Sets the components of this Vector2.\r\n     *\r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    set(x = 0, y = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets all components of this Vector2 to zero.\r\n     *\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    zero() {\r\n        return this.set();\r\n    }\r\n    /**\r\n     * Returns a new array containg the Vector2 component values.\r\n     *\r\n     * @returns {number[]}\r\n     * @memberof Vec2\r\n     */\r\n    getArray() {\r\n        return [this.x, this.y];\r\n    }\r\n    /**\r\n     * Sets the values of this Vector2 based on the given array, or array-like object, such as a Float32.\r\n     *\r\n     * The source must have 2 elements, starting from index 0 through to index 1.\r\n     *\r\n     * @param {number[]} src - The source array to copy the values from.\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    fromArray(src) {\r\n        return this.set(src[0], src[1]);\r\n    }\r\n    [Symbol.iterator]() {\r\n        const data = this.getArray();\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n//# sourceMappingURL=Vec2.js.map","import { Matrix2D } from '@phaserjs/math-matrix2d';\r\nimport { Vec2 } from '@phaserjs/math-vec2';\r\nexport class Transform {\r\n    constructor(x = 0, y = 0, rotation = 0, scaleX = 1, scaleY = 1) {\r\n        this.local = new Matrix2D();\r\n        this.world = new Matrix2D();\r\n        this._position = new Vec2(x, y);\r\n        this._scale = new Vec2(scaleX, scaleY);\r\n        this._skew = new Vec2(0, 0);\r\n        this._origin = new Vec2(0, 0);\r\n        this._rotation = rotation;\r\n        this.dirty = true;\r\n    }\r\n    update() {\r\n        if (!this.dirty) {\r\n            return false;\r\n        }\r\n        const { _a, _b, _c, _d, _position } = this;\r\n        // tx = this._position.x - ((this._origin.x * a) + (this._origin.y * c));\r\n        // ty = this._position.y - ((this._origin.x * b) + (this._origin.y * d));\r\n        this.local.set(_a, _b, _c, _d, _position.x, _position.y);\r\n        this.dirty = false;\r\n        return true;\r\n    }\r\n    setPosition(x, y) {\r\n        this._position.set(x, y);\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n    setScale(scaleX, scaleY = scaleX) {\r\n        this._scale.set(scaleX, scaleY);\r\n        this.dirty = true;\r\n        this.updateCache();\r\n        return this;\r\n    }\r\n    setSkew(skewX, skewY) {\r\n        this._skew.set(skewX, skewY);\r\n        this.dirty = true;\r\n        this.updateCache();\r\n        return this;\r\n    }\r\n    setOrigin(originX, originY = originX) {\r\n        this._origin.set(originX, originY);\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n    setRotation(rotation) {\r\n        this.rotation = rotation;\r\n        return this;\r\n    }\r\n    updateCache() {\r\n        const { _rotation, _skew, _scale } = this;\r\n        this._a = Math.cos(_rotation + _skew.y) * _scale.x;\r\n        this._b = Math.sin(_rotation + _skew.y) * _scale.x;\r\n        this._c = -Math.sin(_rotation - _skew.x) * _scale.y;\r\n        this._d = Math.cos(_rotation - _skew.x) * _scale.y;\r\n    }\r\n    set x(value) {\r\n        this._position.x = value;\r\n        this.dirty = true;\r\n    }\r\n    get x() {\r\n        return this._position.x;\r\n    }\r\n    set y(value) {\r\n        this._position.y = value;\r\n        this.dirty = true;\r\n    }\r\n    get y() {\r\n        return this._position.y;\r\n    }\r\n    set rotation(value) {\r\n        this._rotation = value;\r\n        this.dirty = true;\r\n        this.updateCache();\r\n    }\r\n    get rotation() {\r\n        return this._rotation;\r\n    }\r\n    set scaleX(value) {\r\n        this._scale.x = value;\r\n        this.dirty = true;\r\n        this.updateCache();\r\n    }\r\n    get scaleX() {\r\n        return this._scale.x;\r\n    }\r\n    set scaleY(value) {\r\n        this._scale.y = value;\r\n        this.dirty = true;\r\n        this.updateCache();\r\n    }\r\n    get scaleY() {\r\n        return this._scale.y;\r\n    }\r\n    set originX(value) {\r\n        this._origin.x = value;\r\n        this.dirty = true;\r\n    }\r\n    get originX() {\r\n        return this._origin.x;\r\n    }\r\n    set originY(value) {\r\n        this._origin.y = value;\r\n        this.dirty = true;\r\n    }\r\n    get originY() {\r\n        return this._origin.y;\r\n    }\r\n    set skewX(value) {\r\n        this._skew.x = value;\r\n        this.dirty = true;\r\n        this.updateCache();\r\n    }\r\n    get skewX() {\r\n        return this._skew.x;\r\n    }\r\n    set skewY(value) {\r\n        this._skew.y = value;\r\n        this.dirty = true;\r\n        this.updateCache();\r\n    }\r\n    get skewY() {\r\n        return this._skew.y;\r\n    }\r\n}\r\n//# sourceMappingURL=Transform.js.map","import Texture from './Texture';\nimport { Transform } from '@phaserjs/math-transform';\nimport { Vec2 } from '@phaserjs/math-vec2';\n\nexport default class Sprite extends Transform\n{\n    readonly topLeft: Vec2;\n    readonly topRight: Vec2;\n    readonly bottomLeft: Vec2;\n    readonly bottomRight: Vec2;\n\n    readonly rgba;\n\n    visible: boolean = true;\n    texture: Texture = null;\n\n    uv = {\n        topLeft: { x: 0, y: 0 },\n        topRight: { x: 1, y: 0 },\n        bottomLeft: { x: 0, y: 1 },\n        bottomRight: { x: 1, y: 1 }\n    };\n\n    bounds = null;\n\n    private _size: Vec2;\n\n    gravity: number = 0.75;\n    speedX: number = Math.random() * 10;\n    speedY: number = (Math.random() * 10) - 5;\n\n    constructor (x: number, y: number, width: number, height: number, r: number = 1, g: number = 1, b: number = 1, a: number = 1)\n    {\n        super(x, y);\n\n        this._size = new Vec2(width, height);\n\n        this.topLeft = new Vec2();\n        this.topRight = new Vec2();\n        this.bottomLeft = new Vec2();\n        this.bottomRight = new Vec2();\n\n        this.rgba = { r, g, b, a };\n\n        this.setOrigin(0.5, 1);\n\n        this.updateVertices();\n    }\n\n    setTexture (texture: Texture)\n    {\n        this.texture = texture;\n\n        this._size.set(texture.width, texture.height);\n\n        this.dirty = true;\n\n        this.updateVertices();\n\n        return this;\n    }\n\n    step ()\n    {\n        this.x += this.speedX;\n        this.y += this.speedY;\n        this.speedY += this.gravity;\n    \n        if (this.x > this.bounds.right)\n        {\n            this.speedX *= -1;\n            this.x = this.bounds.right;\n        }\n        else if (this.x < this.bounds.left)\n        {\n            this.speedX *= -1;\n            this.x = this.bounds.left;\n        }\n    \n        if (this.y > this.bounds.bottom)\n        {\n            this.speedY *= -0.85;\n            this.y = this.bounds.bottom;\n            if (Math.random() > 0.5)\n            {\n                this.speedY -= Math.random() * 6;\n            }\n        }\n        else if (this.y < this.bounds.top)\n        {\n            this.speedY = 0;\n            this.y = this.bounds.top;\n        }\n\n        this.updateVertices();\n    }\n\n    updateVertices (): boolean\n    {\n        if (!this.dirty)\n        {\n            return false;\n        }\n\n        this.update();\n\n        const w: number = this._size.x;\n        const h: number = this._size.y;\n\n        const x0: number = -(this._origin.x * w);\n        const x1: number = x0 + w;\n        const y0: number = -(this._origin.y * h);\n        const y1: number = y0 + h;\n\n        const { a, b, c, d, tx, ty } = this.local;\n\n        //  Cache the calculations to avoid 8 getX/Y function calls:\n\n        const x0a: number = x0 * a;\n        const x0b: number = x0 * b;\n        const y0c: number = y0 * c;\n        const y0d: number = y0 * d;\n\n        const x1a: number = x1 * a;\n        const x1b: number = x1 * b;\n        const y1c: number = y1 * c;\n        const y1d: number = y1 * d;\n\n        this.topLeft.set(x0a + y0c + tx, x0b + y0d + ty);\n        this.topRight.set(x1a + y0c + tx, x1b + y0d + ty);\n        this.bottomLeft.set(x0a + y1c + tx, x0b + y1d + ty);\n        this.bottomRight.set(x1a + y1c + tx, x1b + y1d + ty);\n\n        return true;\n    }\n\n    batch (dataTA: Float32Array, offset: number)\n    {\n        dataTA[offset + 0] = this.topLeft.x;\n        dataTA[offset + 1] = this.topLeft.y;\n        dataTA[offset + 2] = this.rgba.r;\n        dataTA[offset + 3] = this.rgba.g;\n        dataTA[offset + 4] = this.rgba.b;\n        dataTA[offset + 5] = this.rgba.a;\n        dataTA[offset + 6] = this.uv.topLeft.x;\n        dataTA[offset + 7] = this.uv.topLeft.y;\n\n        dataTA[offset + 8] = this.bottomLeft.x;\n        dataTA[offset + 9] = this.bottomLeft.y;\n        dataTA[offset + 10] = this.rgba.r;\n        dataTA[offset + 11] = this.rgba.g;\n        dataTA[offset + 12] = this.rgba.b;\n        dataTA[offset + 13] = this.rgba.a;\n        dataTA[offset + 14] = this.uv.bottomLeft.x;\n        dataTA[offset + 15] = this.uv.bottomLeft.y;\n\n        dataTA[offset + 16] = this.bottomRight.x;\n        dataTA[offset + 17] = this.bottomRight.y;\n        dataTA[offset + 18] = this.rgba.r;\n        dataTA[offset + 19] = this.rgba.g;\n        dataTA[offset + 20] = this.rgba.b;\n        dataTA[offset + 21] = this.rgba.a;\n        dataTA[offset + 22] = this.uv.bottomRight.x;\n        dataTA[offset + 23] = this.uv.bottomRight.y;\n\n        dataTA[offset + 24] = this.topRight.x;\n        dataTA[offset + 25] = this.topRight.y;\n        dataTA[offset + 26] = this.rgba.r;\n        dataTA[offset + 27] = this.rgba.g;\n        dataTA[offset + 28] = this.rgba.b;\n        dataTA[offset + 29] = this.rgba.a;\n        dataTA[offset + 30] = this.uv.topRight.x;\n        dataTA[offset + 31] = this.uv.topRight.y;\n    }\n\n    batchMultiTexture (dataTA: Float32Array, offset: number)\n    {\n        const textureIndex = this.texture.glIndex;\n        const { r, g, b, a } = this.rgba;\n\n        dataTA[offset + 0] = this.topLeft.x;\n        dataTA[offset + 1] = this.topLeft.y;\n        dataTA[offset + 2] = r;\n        dataTA[offset + 3] = g;\n        dataTA[offset + 4] = b;\n        dataTA[offset + 5] = a;\n        dataTA[offset + 6] = this.uv.topLeft.x;\n        dataTA[offset + 7] = this.uv.topLeft.y;\n        dataTA[offset + 8] = textureIndex;\n\n        dataTA[offset + 9] = this.bottomLeft.x;\n        dataTA[offset + 10] = this.bottomLeft.y;\n        dataTA[offset + 11] = r;\n        dataTA[offset + 12] = g;\n        dataTA[offset + 13] = b;\n        dataTA[offset + 14] = a;\n        dataTA[offset + 15] = this.uv.bottomLeft.x;\n        dataTA[offset + 16] = this.uv.bottomLeft.y;\n        dataTA[offset + 17] = textureIndex;\n\n        dataTA[offset + 18] = this.bottomRight.x;\n        dataTA[offset + 19] = this.bottomRight.y;\n        dataTA[offset + 20] = r;\n        dataTA[offset + 21] = g;\n        dataTA[offset + 22] = b;\n        dataTA[offset + 23] = a;\n        dataTA[offset + 24] = this.uv.bottomRight.x;\n        dataTA[offset + 25] = this.uv.bottomRight.y;\n        dataTA[offset + 26] = textureIndex;\n\n        dataTA[offset + 27] = this.topRight.x;\n        dataTA[offset + 28] = this.topRight.y;\n        dataTA[offset + 29] = r;\n        dataTA[offset + 30] = g;\n        dataTA[offset + 31] = b;\n        dataTA[offset + 32] = a;\n        dataTA[offset + 33] = this.uv.topRight.x;\n        dataTA[offset + 34] = this.uv.topRight.y;\n        dataTA[offset + 35] = textureIndex;\n    }\n\n    batchMultiTextureNoColor (dataTA: Float32Array, offset: number)\n    {\n        const textureIndex = this.texture.glIndex;\n\n        dataTA[offset + 0] = this.topLeft.x;\n        dataTA[offset + 1] = this.topLeft.y;\n        dataTA[offset + 2] = this.uv.topLeft.x;\n        dataTA[offset + 3] = this.uv.topLeft.y;\n        dataTA[offset + 4] = textureIndex;\n\n        dataTA[offset + 5] = this.bottomLeft.x;\n        dataTA[offset + 6] = this.bottomLeft.y;\n        dataTA[offset + 7] = this.uv.bottomLeft.x;\n        dataTA[offset + 8] = this.uv.bottomLeft.y;\n        dataTA[offset + 9] = textureIndex;\n\n        dataTA[offset + 10] = this.bottomRight.x;\n        dataTA[offset + 11] = this.bottomRight.y;\n        dataTA[offset + 12] = this.uv.bottomRight.x;\n        dataTA[offset + 13] = this.uv.bottomRight.y;\n        dataTA[offset + 14] = textureIndex;\n\n        dataTA[offset + 15] = this.topRight.x;\n        dataTA[offset + 16] = this.topRight.y;\n        dataTA[offset + 17] = this.uv.topRight.x;\n        dataTA[offset + 18] = this.uv.topRight.y;\n        dataTA[offset + 19] = textureIndex;\n    }\n\n}","//  Base Texture\n\nexport default class Texture\n{\n    key: string;\n\n    width: number;\n    height: number;\n\n    image: HTMLImageElement;\n\n    gl: WebGLRenderingContext;\n    glTexture: WebGLTexture;\n    glIndex: number = 0;\n\n    _onLoadCallback: Function;\n\n    constructor (key: string, gl: WebGLRenderingContext, glIndex: number = 0)\n    {\n        this.key = key;\n\n        this.gl = gl;\n        this.glIndex = glIndex;\n    }\n\n    onLoad ()\n    {\n        // console.log(this.key, 'loaded');\n\n        const gl = this.gl;\n\n        this.glTexture = this.gl.createTexture();\n\n        gl.activeTexture(gl.TEXTURE0 + this.glIndex);\n\n        gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\n\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.image);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n        this.width = this.image.width;\n        this.height = this.image.height;\n\n        //  POT only\n        // gl.generateMipmap(gl.TEXTURE_2D);\n\n        this.image.onload = null;\n\n        if (this._onLoadCallback)\n        {\n            this._onLoadCallback(this);\n        }\n    }\n\n    load (url: string, callback?: Function)\n    {\n        // console.log(this.key, 'loading');\n\n        this.image = new Image();\n\n        this.image.onload = () => this.onLoad();\n\n        this.image.src = url;\n\n        if (callback)\n        {\n            this._onLoadCallback = callback;\n        }\n\n        // Image is immediately-available / cached\n        if (this.image.complete && this.image.width && this.image.height)\n        {\n            this.onLoad();\n        }\n    }\n}\n","export default {\n\n    fragmentShader: `\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying float vTextureId;\n\nuniform sampler2D uTexture[%count%];\n\nvoid main (void)\n{\n    vec4 color;\n\n    %forloop%\n\n    gl_FragColor = color;\n}`,\n    \n    vertexShader: `\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aTextureId;\n\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying float vTextureId;\n\nvoid main (void)\n{\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n\n    gl_Position = uProjectionMatrix * vec4(aVertexPosition, 0.0, 1.0);\n}`\n\n}\n","export class Matrix4 {\r\n    /**\r\n     * Creates an instance of a Matrix4.\r\n     *\r\n     * Format: column-major, when typed out it looks like row-major.\r\n     *\r\n     * @param {number} [m00=1] - Component in column 0, row 0 position (index 0)\r\n     * @param {number} [m01=0] - Component in column 0, row 1 position (index 1)\r\n     * @param {number} [m02=0] - Component in column 0, row 2 position (index 2)\r\n     * @param {number} [m03=0] - Component in column 0, row 3 position (index 3)\r\n     * @param {number} [m10=0] - Component in column 1, row 0 position (index 4)\r\n     * @param {number} [m11=1] - Component in column 1, row 1 position (index 5)\r\n     * @param {number} [m12=0] - Component in column 1, row 2 position (index 6)\r\n     * @param {number} [m13=0] - Component in column 1, row 3 position (index 7)\r\n     * @param {number} [m20=0] - Component in column 2, row 0 position (index 8)\r\n     * @param {number} [m21=0] - Component in column 2, row 1 position (index 9)\r\n     * @param {number} [m22=1] - Component in column 2, row 2 position (index 10)\r\n     * @param {number} [m23=0] - Component in column 2, row 3 position (index 11)\r\n     * @param {number} [m30=0] - Component in column 3, row 0 position (index 12)\r\n     * @param {number} [m31=0] - Component in column 3, row 1 position (index 13)\r\n     * @param {number} [m32=0] - Component in column 3, row 2 position (index 14)\r\n     * @param {number} [m33=1] - Component in column 3, row 3 position (index 15)\r\n     * @memberof Matrix4\r\n     */\r\n    constructor(m00 = 1, m01 = 0, m02 = 0, m03 = 0, m10 = 0, m11 = 1, m12 = 0, m13 = 0, m20 = 0, m21 = 0, m22 = 1, m23 = 0, m30 = 0, m31 = 0, m32 = 0, m33 = 1) {\r\n        this.set(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\r\n    }\r\n    /**\r\n     * Sets the components of this Matrix4.\r\n     *\r\n     * If no parameters are given it resets this Matrix4 to an identity matrix.\r\n     *\r\n     * @param {number} [m00=1] - Component in column 0, row 0 position (index 0)\r\n     * @param {number} [m01=0] - Component in column 0, row 1 position (index 1)\r\n     * @param {number} [m02=0] - Component in column 0, row 2 position (index 2)\r\n     * @param {number} [m03=0] - Component in column 0, row 3 position (index 3)\r\n     * @param {number} [m10=0] - Component in column 1, row 0 position (index 4)\r\n     * @param {number} [m11=1] - Component in column 1, row 1 position (index 5)\r\n     * @param {number} [m12=0] - Component in column 1, row 2 position (index 6)\r\n     * @param {number} [m13=0] - Component in column 1, row 3 position (index 7)\r\n     * @param {number} [m20=0] - Component in column 2, row 0 position (index 8)\r\n     * @param {number} [m21=0] - Component in column 2, row 1 position (index 9)\r\n     * @param {number} [m22=1] - Component in column 2, row 2 position (index 10)\r\n     * @param {number} [m23=0] - Component in column 2, row 3 position (index 11)\r\n     * @param {number} [m30=0] - Component in column 3, row 0 position (index 12)\r\n     * @param {number} [m31=0] - Component in column 3, row 1 position (index 13)\r\n     * @param {number} [m32=0] - Component in column 3, row 2 position (index 14)\r\n     * @param {number} [m33=1] - Component in column 3, row 3 position (index 15)\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    set(m00 = 1, m01 = 0, m02 = 0, m03 = 0, m10 = 0, m11 = 1, m12 = 0, m13 = 0, m20 = 0, m21 = 0, m22 = 1, m23 = 0, m30 = 0, m31 = 0, m32 = 0, m33 = 1) {\r\n        this.m00 = m00;\r\n        this.m01 = m01;\r\n        this.m02 = m02;\r\n        this.m03 = m03;\r\n        this.m10 = m10;\r\n        this.m11 = m11;\r\n        this.m12 = m12;\r\n        this.m13 = m13;\r\n        this.m20 = m20;\r\n        this.m21 = m21;\r\n        this.m22 = m22;\r\n        this.m23 = m23;\r\n        this.m30 = m30;\r\n        this.m31 = m31;\r\n        this.m32 = m32;\r\n        this.m33 = m33;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets all components of this Matrix4 to zero.\r\n     *\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    zero() {\r\n        return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n    }\r\n    /**\r\n     * Resets this Matrix4 to an identity matrix.\r\n     *\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    identity() {\r\n        return this.set();\r\n    }\r\n    /**\r\n     * Returns a new array containg the Matrix4 component values in column-major format.\r\n     *\r\n     * @returns {number[]}\r\n     * @memberof Matrix4\r\n     */\r\n    getArray() {\r\n        return [this.m00, this.m01, this.m02, this.m03, this.m10, this.m11, this.m12, this.m13, this.m20, this.m21, this.m22, this.m23, this.m30, this.m31, this.m32, this.m33];\r\n    }\r\n    /**\r\n     * Sets the values of this Matrix4 based on the given array, or array-like object, such as a Float32.\r\n     *\r\n     * The source must have 16 elements, starting from index 0 through to index 15.\r\n     *\r\n     * @param {number[]} src - The source array to copy the values from.\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    fromArray(src) {\r\n        return this.set(src[0], src[1], src[2], src[3], src[4], src[5], src[6], src[7], src[8], src[9], src[10], src[11], src[12], src[13], src[14], src[15]);\r\n    }\r\n    [Symbol.iterator]() {\r\n        const data = this.getArray();\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix4.js.map","import { Matrix4 } from '@phaserjs/math-matrix4';\r\nexport function Ortho(left, right, bottom, top, near, far) {\r\n    const lr = 1 / (left - right);\r\n    const bt = 1 / (bottom - top);\r\n    const nf = 1 / (near - far);\r\n    const m00 = -2 * lr;\r\n    const m11 = -2 * bt;\r\n    const m22 = 2 * nf;\r\n    const m30 = (left + right) * lr;\r\n    const m31 = (top + bottom) * bt;\r\n    const m32 = (far + near) * nf;\r\n    return new Matrix4(m00, 0, 0, 0, 0, m11, 0, 0, 0, 0, m22, 0, m30, m31, m32, 1);\r\n}\r\n//# sourceMappingURL=Ortho.js.map","import Bunny from './Bunny';\nimport Texture from './Texture';\nimport MultiTexturedQuadShader from './MultiTexturedQuadShaderColor';\nimport { Ortho } from '@phaserjs/math-matrix4-funcs';\n\n//  Multi-Texture Assigned at run-time, not hard coded into render\n\nconst fragTemplate = [\n    'precision mediump float;',\n    'void main(void){',\n    'float test = 0.1;',\n    '%forloop%',\n    'gl_FragColor = vec4(0.0);',\n    '}',\n].join('\\n');\n\n//  From Pixi v5:\nfunction checkMaxIfStatementsInShader (maxIfs: number, gl: WebGLRenderingContext): number\n{\n    const shader = gl.createShader(gl.FRAGMENT_SHADER);\n\n    while (true)\n    {\n        const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n\n        gl.shaderSource(shader, fragmentSrc);\n        gl.compileShader(shader);\n\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\n        {\n            maxIfs = (maxIfs / 2) | 0;\n        }\n        else\n        {\n            // valid!\n            break;\n        }\n    }\n\n    return maxIfs;\n}\n\nfunction generateIfTestSrc (maxIfs: number): string\n{\n    let src = '';\n\n    for (let i = 0; i < maxIfs; ++i)\n    {\n        if (i > 0)\n        {\n            src += '\\nelse ';\n        }\n\n        if (i < maxIfs - 1)\n        {\n            src += `if(test == ${i}.0){}`;\n        }\n    }\n\n    return src;\n}\n\nfunction generateSampleSrc (maxTextures: number): string\n{\n    let src = '';\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        if (i > 0)\n        {\n            src += '\\n    else ';\n        }\n\n        if (i < maxTextures - 1)\n        {\n            src += `if (vTextureId < ${i}.5)`;\n        }\n\n        src += '\\n    {';\n        src += `\\n        color = texture2D(uTexture[${i}], vTextureCoord);`;\n        src += '\\n    }';\n    }\n\n    return src;\n}\n\nexport default function ()\n{\n    const resolution = { x: 800, y: 600 };\n    const bounds = { left: 0, top: 0, right: resolution.x, bottom: resolution.y };\n\n    const canvas = document.getElementById('game') as HTMLCanvasElement;\n\n    canvas.width = resolution.x;\n    canvas.height = resolution.y;\n\n    const contextOptions: WebGLContextAttributes = {\n        alpha: false,\n        antialias: true,\n        premultipliedAlpha: false,\n        stencil: false,\n        preserveDrawingBuffer: false\n    };\n\n    const gl: WebGLRenderingContext = canvas.getContext('webgl', contextOptions);\n    \n    //  Multi-texture support\n    let maxTextures = checkMaxIfStatementsInShader(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS), gl);\n\n    console.log('maxTextures', maxTextures, 'out of', gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));\n\n    //  Create temp textures to stop WebGL errors\n    for (let i = 0; i < maxTextures; i++)\n    {\n        let tempTexture = gl.createTexture();\n\n        gl.activeTexture(gl.TEXTURE0 + i);\n\n        gl.bindTexture(gl.TEXTURE_2D, tempTexture);\n\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([ 0, 0, 255, 255 ]));\n    }\n\n    const uTextureLocationIndex = Array.from(Array(maxTextures).keys());\n\n    let fragmentShaderSource = MultiTexturedQuadShader.fragmentShader;\n\n    fragmentShaderSource = fragmentShaderSource.replace(/%count%/gi, `${maxTextures}`);\n    fragmentShaderSource = fragmentShaderSource.replace(/%forloop%/gi, generateSampleSrc(maxTextures));\n\n    // console.log(fragmentShaderSource);\n\n    //  Create the shaders\n\n    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    \n    gl.shaderSource(fragmentShader, fragmentShaderSource);\n    gl.compileShader(fragmentShader);\n    \n    const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    \n    gl.shaderSource(vertexShader, MultiTexturedQuadShader.vertexShader);\n    gl.compileShader(vertexShader);\n    \n    const program = gl.createProgram();\n    \n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    gl.useProgram(program);\n    \n    const vertexPositionAttrib = gl.getAttribLocation(program, 'aVertexPosition');\n    const vertexTextureCoord = gl.getAttribLocation(program, 'aTextureCoord');\n    const vertexTextureIndex = gl.getAttribLocation(program, 'aTextureId');\n\n    const uProjectionMatrix = gl.getUniformLocation(program, 'uProjectionMatrix');\n    const uTextureLocation = gl.getUniformLocation(program, 'uTexture');\n\n    gl.enableVertexAttribArray(vertexPositionAttrib);\n    gl.enableVertexAttribArray(vertexTextureCoord);\n    gl.enableVertexAttribArray(vertexTextureIndex);\n\n    //  number of bunnies on the stage\n    let count = 0;\n\n    //  The maximum number of bunnies to render\n    let maxCount = 200000;\n\n    //  Number of bunnies to add each frame\n    let amount = 200;\n\n    let isAdding = false;\n\n    //  Number of bunnies to start with\n    let startBunnyCount = 2000;\n\n\n\n\n    const maxSpritesPerBatch = 2000;\n\n    //  The size in bytes per element in the dataArray\n    const size = 4;\n\n    //  Size in bytes of a single vertex\n\n    /**\n     * Each vertex contains:\n     * \n     *  position (x,y - 2 floats)\n     *  texture coord (x,y - 2 floats)\n     *  texture index (float)\n     */\n    const singleVertexSize = 20;\n\n    //  Size of a single sprite in array elements\n    //  Each vertex = 9 elements, so 9 * 4\n    const singleSpriteSize = 20;\n\n    //  Size in bytes of a single sprite\n    const singleSpriteByteSize = singleVertexSize * size;\n\n    //  Size in bytes of a single vertex indicies\n    const singleIndexByteSize = 4;\n\n    //  Size in bytes of a single vertex indicies\n    const singleSpriteIndexSize = 6;\n\n    //  The size of our ArrayBuffer\n    const bufferByteSize = maxSpritesPerBatch * singleSpriteByteSize;\n\n    //  Our ArrayBuffer + View\n    const dataTA = new Float32Array(bufferByteSize);\n\n    let ibo = [];\n\n    //  Seed the index buffer\n    for (let i = 0; i < (maxSpritesPerBatch * singleIndexByteSize); i += singleIndexByteSize)\n    {\n        ibo.push(i + 0, i + 1, i + 2, i + 2, i + 3, i + 0);\n    }\n\n    //  Our buffers\n\n    const vertexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, dataTA, gl.DYNAMIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    \n    const indexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(ibo), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n    //  This matrix will convert from pixels to clip space - it only needs to be set when the canvas is sized\n    const projectionMatrix = Ortho(0, resolution.x, resolution.y, 0, -1000, 1000);\n    \n    const stride = 20;\n\n    //  Textures ...\n    const textures: Texture[] = [];\n\n    function loadTextures (urls: string[])\n    {\n        let texturesLeft = urls.length;\n\n        const onLoadCallback = () => {\n\n            texturesLeft--;\n\n            if (texturesLeft === 0)\n            {\n                create();\n            }\n\n        }\n\n        urls.forEach((url, index) => {\n\n            let texture = new Texture(url, gl, textures.length);\n\n            texture.load('../assets/bunnies/' + url, onLoadCallback);\n\n            textures.push(texture);\n\n        });\n    }\n\n    loadTextures([\n        'rabbitv3.png',\n        'rabbitv3_ash.png',\n        'rabbitv3_batman.png',\n        'rabbitv3_bb8.png',\n        'rabbitv3_frankenstein.png',\n        'rabbitv3_neo.png',\n        'rabbitv3_sonic.png',\n        'rabbitv3_spidey.png',\n        'rabbitv3_stormtrooper.png',\n        'rabbitv3_superman.png',\n        'rabbitv3_tron.png',\n        'rabbitv3_wolverine.png'\n    ]);\n\n    const bunnies: Bunny[] = [];\n\n    function addBunnies (num: number)\n    {\n        for (let i = 0; i < num; i++)\n        {\n            let texture = textures[count % textures.length];\n            let x = (count % 2) * 800;\n\n            let bunny = new Bunny(x, 0, 25, 32);\n\n            bunny.bounds = bounds;\n\n            bunny.setTexture(texture);\n\n            bunnies.push(bunny);\n\n            count++;\n        }\n    }\n\n    let stats;\n    let counter: HTMLSpanElement;\n\n    function create ()\n    {\n        if (startBunnyCount > 0)\n        {\n            addBunnies(startBunnyCount);\n        }\n\n        // stats = new window['Stats']();\n        // stats.domElement.id = 'stats';\n        // document.body.append(stats.domElement);\n\n        // counter = document.createElement('span');\n        // counter.innerText = count.toString();\n        // document.body.append(counter);\n\n        window.addEventListener('mousedown', () => {\n            isAdding = true;\n        });\n\n        window.addEventListener('mouseup', () => {\n            isAdding = false;\n        });\n\n        //  Prepare textures\n        for (let i = 0; i < textures.length; i++)\n        {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, textures[i].glTexture);\n        }\n\n        render();\n    }\n\n    function flush (count: number)\n    {\n        const offset = count * singleSpriteByteSize;\n\n        if (offset === bufferByteSize)\n        {\n            gl.bufferData(gl.ARRAY_BUFFER, dataTA, gl.DYNAMIC_DRAW);\n        }\n        else\n        {\n            let view = dataTA.subarray(0, offset);\n\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, view);\n        }\n\n        gl.drawElements(gl.TRIANGLES, count * singleSpriteIndexSize, gl.UNSIGNED_SHORT, 0);\n    }\n\n    function render ()\n    {\n        // stats.begin();\n\n        if (isAdding && count < maxCount)\n        {\n            addBunnies(amount);\n            // counter.innerText = count.toString();\n        }\n\n        // const activeTextures = Array(maxTextures).fill(0);\n\n        gl.clearColor(0, 0, 0, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n        gl.viewport(0, 0, canvas.width, canvas.height);\n\n        gl.uniformMatrix4fv(uProjectionMatrix, false, projectionMatrix);\n        gl.uniform1iv(uTextureLocation, uTextureLocationIndex);\n\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\n        /**\n         * Each vertex contains:\n         * \n         *  position (x,y - 2 floats)\n         *  texture coord (x,y - 2 floats)\n         *  texture index (float)\n         * \n         * 5 floats = 5 * 4 bytes = 20 bytes per vertex. This is our stride.\n         * \n         * The offset is how much data should be skipped at the start of each chunk.\n         * \n         * In our index, the color data is right after the position data.\n         * Position is 2 floats, so the offset for the coord is 2 * 4 bytes = 8 bytes.\n         * Texture Coord is 2 floats, so the offset for Texture Index is 2 * 4 bytes = 8 bytes, plus the 8 from position\n         */\n\n        gl.vertexAttribPointer(vertexPositionAttrib, 2, gl.FLOAT, false, stride, 0);    // size = 8\n        gl.vertexAttribPointer(vertexTextureCoord, 2, gl.FLOAT, false, stride, 8);      // size = 8\n        gl.vertexAttribPointer(vertexTextureIndex, 1, gl.FLOAT, false, stride, 8 + 8);  // size = 4\n\n        let size = 0;\n\n        for (let i = 0; i < bunnies.length; i++)\n        {\n            let bunny = bunnies[i];\n\n            bunny.step();\n\n            //  The offset here is the offset into the array, NOT a byte size!\n            bunny.batchMultiTextureNoColor(dataTA, size * singleSpriteSize);\n\n            //  if size = batch limit, flush here\n            if (size === maxSpritesPerBatch)\n            {\n                flush(size);\n    \n                size = 0;\n            }\n            else\n            {\n                size++;\n            }\n        }\n\n        if (size > 0)\n        {\n            flush(size);\n        }\n\n        requestAnimationFrame(render);\n\n        // stats.end();\n    }\n}\n","import part01 from './part01';\nimport part02 from './part02';\nimport part03 from './part03';\nimport part04 from './part04';\nimport part05 from './part05';\nimport part06 from './part06';\nimport part07 from './part07';\nimport part08 from './part08';\nimport part09 from './part09';\nimport part10 from './part10';\nimport part11 from './part11';\nimport part12 from './part12';\nimport part13 from './part13';\nimport part14 from './part14';\nimport part15 from './part15';\nimport part16 from './part16';\nimport part17 from './part17';\nimport part18 from './part18';\nimport part19 from './part19';\nimport part20 from './part20';\nimport bunnymark from './bunnymark';\nimport bunnymarkNoColor from './bunnymark-nocolor';\n\n// bunnymark();\nbunnymarkNoColor();\n\n//  Next steps:\n\n//  X Bunny mark (because, why not?)\n//  * Multi Textures keep index 0 free for exceeding max\n//  * Multi Textures round-robin, don't use glIndex\n//  X Multi Textures assigned at run-time up to max\n//  X Multi-texture support\n//  * Texture Frames (UV) support\n//  * Camera matrix, added to the shader (projection * camera * vertex pos), so we can move the camera around, rotate it, etc.\n//  X Sub-data buffer with batch flush, like current renderer handles it\n//  * Transform stack test (Quad with children, children of children, etc)\n//  * Instead of a Quad class, try a class that can have any number of vertices in it (ala Rope), or any vertex moved\n//  * Encode color as a single float, rather than a vec4\n\n//  X Add a basic display list, so the buffer is cleared each frame and populated via the list\n//  X Try adding all quads to a single huge buffer on creation (remove on destruction), then in the render loop\n//    copy chunks from this buffer to the gl buffer - depends how fast typed array copies are vs. pushing elements by index\n"],"names":["Sprite","Transform","constructor","x","y","width","height","r","g","b","a","topLeft","topRight","bottomLeft","bottomRight","Math","random","_size","Vec2","rgba","setOrigin","updateVertices","setTexture","texture","set","dirty","step","speedX","speedY","gravity","bounds","right","left","bottom","top","update","w","h","x0","_origin","x1","y0","y1","c","d","tx","ty","local","x0a","x0b","y0c","y0d","x1a","x1b","y1c","y1d","batch","dataTA","offset","uv","batchMultiTexture","textureIndex","glIndex","batchMultiTextureNoColor","Texture","key","gl","onLoad","glTexture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","image","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","onload","_onLoadCallback","load","url","callback","Image","src","complete","fragmentShader","vertexShader","fragTemplate","join","checkMaxIfStatementsInShader","maxIfs","shader","createShader","FRAGMENT_SHADER","fragmentSrc","replace","generateIfTestSrc","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","i","generateSampleSrc","maxTextures","resolution","canvas","document","getElementById","contextOptions","alpha","antialias","premultipliedAlpha","stencil","preserveDrawingBuffer","getContext","getParameter","MAX_TEXTURE_IMAGE_UNITS","console","log","tempTexture","Uint8Array","uTextureLocationIndex","Array","from","keys","fragmentShaderSource","MultiTexturedQuadShader","VERTEX_SHADER","program","createProgram","attachShader","linkProgram","useProgram","vertexPositionAttrib","getAttribLocation","vertexTextureCoord","vertexTextureIndex","uProjectionMatrix","getUniformLocation","uTextureLocation","enableVertexAttribArray","count","maxCount","amount","isAdding","startBunnyCount","maxSpritesPerBatch","size","singleVertexSize","singleSpriteSize","singleSpriteByteSize","singleIndexByteSize","singleSpriteIndexSize","bufferByteSize","Float32Array","ibo","push","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","DYNAMIC_DRAW","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","STATIC_DRAW","projectionMatrix","Ortho","stride","textures","loadTextures","urls","texturesLeft","length","onLoadCallback","create","forEach","index","bunnies","addBunnies","num","bunny","Bunny","window","addEventListener","render","flush","view","subarray","bufferSubData","drawElements","TRIANGLES","UNSIGNED_SHORT","clearColor","clear","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","viewport","uniformMatrix4fv","uniform1iv","vertexAttribPointer","FLOAT","requestAnimationFrame","bunnymarkNoColor"],"mappings":"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"}