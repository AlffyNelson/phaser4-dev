{"version":3,"file":"test026.js","sources":["../../node_modules/@phaserjs/renderer-webgl2/dist/Blend.js","../../node_modules/@phaserjs/renderer-webgl2/dist/DrawCall.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Renderbuffer.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Texture.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Framebuffer.js","../../node_modules/@phaserjs/renderer-webgl2/dist/GetTypeSize.js","../../node_modules/@phaserjs/renderer-webgl2/dist/GetUniform.js","../../node_modules/@phaserjs/renderer-webgl2/dist/MatrixUniform.js","../../node_modules/@phaserjs/renderer-webgl2/dist/MultiBoolUniform.js","../../node_modules/@phaserjs/renderer-webgl2/dist/MultiNumericUniform.js","../../node_modules/@phaserjs/renderer-webgl2/dist/const.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Shader.js","../../node_modules/@phaserjs/renderer-webgl2/dist/SingleComponentUniform.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Program.js","../../node_modules/@phaserjs/renderer-webgl2/dist/Query.js","../../node_modules/@phaserjs/renderer-webgl2/dist/UniformBuffer.js","../../node_modules/@phaserjs/renderer-webgl2/dist/VertexArray.js","../../node_modules/@phaserjs/renderer-webgl2/dist/VertexBuffer.js","../../node_modules/@phaserjs/renderer-webgl2/dist/WebGL2Renderer.js","../../node_modules/@phaserjs/loader/dist/BaseLoaderState.js","../../node_modules/@phaserjs/loader/dist/FileState.js","../../node_modules/@phaserjs/loader/dist/XHRLoader.js","../../node_modules/@phaserjs/loader/dist/XHRSettings.js","../../node_modules/@phaserjs/loader/dist/File.js","../../node_modules/@phaserjs/loader-filetypes/dist/ImageFile.js","../../../phaser4/packages/math-matrix4/dist/Matrix4.js","../../../phaser4/packages/math-matrix4/dist/Ortho.js","../../../phaser4/packages/math-matrix4/dist/RotateZ.js","../../../phaser4/packages/math-matrix4/dist/Scale.js","../../../phaser4/packages/math-matrix4/dist/Translate.js","../../../phaser4/packages/math-vec2/dist/Vec2.js","test026.ts"],"sourcesContent":["export function enableBlend(gl) {\r\n    gl.enable(gl.BLEND);\r\n}\r\nexport function disableBlend(gl) {\r\n    gl.disable(gl.BLEND);\r\n}\r\nexport function setBlendFunc(gl, sfactor, dfactor, equation) {\r\n    gl.blendFunc(sfactor, dfactor);\r\n    if (equation) {\r\n        gl.blendEquation(equation);\r\n    }\r\n}\r\nexport function setBlendFuncSeparate(gl, srcRGB, dstRGB, srcAlpha, dstAlpha) {\r\n    gl.blendFuncSeparate(srcRGB, dstRGB, srcAlpha, dstAlpha);\r\n}\r\nexport function setBlendEquation(gl, mode) {\r\n    gl.blendEquation(mode);\r\n}\r\nexport function setBlendModeNormal(gl) {\r\n    setBlendFunc(gl, gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.FUNC_ADD);\r\n}\r\nexport function setBlendModeAdd(gl) {\r\n    setBlendFunc(gl, gl.ONE, gl.DST_ALPHA, gl.FUNC_ADD);\r\n}\r\nexport function setBlendModeMultiply(gl) {\r\n    setBlendFunc(gl, gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.FUNC_ADD);\r\n}\r\nexport function setBlendModeScreen(gl) {\r\n    setBlendFunc(gl, gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.FUNC_ADD);\r\n}\r\nexport function setBlendModeErase(gl) {\r\n    setBlendFunc(gl, gl.ZERO, gl.ONE_MINUS_SRC_ALPHA, gl.FUNC_REVERSE_SUBTRACT);\r\n}\r\n//# sourceMappingURL=Blend.js.map","export class DrawCall {\r\n    constructor(gl, appState, program, vertexArray = null) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.currentProgram = program;\r\n        this.drawPrimitive = gl.TRIANGLES;\r\n        this.currentVertexArray = vertexArray;\r\n        this.appState = appState;\r\n        this.uniformIndices = {};\r\n        this.uniformNames = new Array(appState.maxUniforms);\r\n        this.uniformValues = new Array(appState.maxUniforms);\r\n        this.uniformCount = 0;\r\n        this.uniformBuffers = new Array(appState.maxUniformBuffers);\r\n        this.uniformBlockNames = new Array(appState.maxUniformBuffers);\r\n        this.uniformBlockCount = 0;\r\n        this.textures = new Array(appState.maxTextureUnits);\r\n        this.textureCount = 0;\r\n        this.offsets = new Int32Array(1);\r\n        this.numElements = new Int32Array(1);\r\n        this.numInstances = new Int32Array(1);\r\n        if (vertexArray) {\r\n            this.numElements[0] = vertexArray.numElements;\r\n            this.numInstances[0] = vertexArray.numInstances;\r\n        }\r\n        this.numDraws = 1;\r\n    }\r\n    setPrimitive(primitive) {\r\n        this.drawPrimitive = primitive;\r\n        return this;\r\n    }\r\n    uniform(name, value) {\r\n        let index = this.uniformIndices[name];\r\n        if (index === undefined) {\r\n            index = this.uniformCount++;\r\n            this.uniformIndices[name] = index;\r\n            this.uniformNames[index] = name;\r\n        }\r\n        this.uniformValues[index] = value;\r\n        return this;\r\n    }\r\n    uniformBlock(name, buffer) {\r\n        const base = this.currentProgram.uniformBlocks[name];\r\n        this.uniformBuffers[base] = buffer;\r\n        return this;\r\n    }\r\n    texture(name, texture) {\r\n        const unit = this.currentProgram.samplers[name];\r\n        this.textures[unit] = texture;\r\n        return this;\r\n    }\r\n    drawRanges(...counts) {\r\n        this.numDraws = counts.length;\r\n        if (this.offsets.length < this.numDraws) {\r\n            this.offsets = new Int32Array(this.numDraws);\r\n        }\r\n        if (this.numElements.length < this.numDraws) {\r\n            this.numElements = new Int32Array(this.numDraws);\r\n        }\r\n        if (this.numInstances.length < this.numDraws) {\r\n            this.numInstances = new Int32Array(this.numDraws);\r\n        }\r\n        for (let i = 0; i < this.numDraws; ++i) {\r\n            const count = counts[i];\r\n            this.offsets[i] = count[0];\r\n            this.numElements[i] = count[1];\r\n            this.numInstances[i] = count[2] || 1;\r\n        }\r\n        return this;\r\n    }\r\n    draw() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const uniformNames = this.uniformNames;\r\n        const uniformValues = this.uniformValues;\r\n        const uniformBuffers = this.uniformBuffers;\r\n        const uniformBlockCount = this.currentProgram.uniformBlockCount;\r\n        const textures = this.textures;\r\n        const textureCount = this.currentProgram.samplerCount;\r\n        const drawPrimitive = this.drawPrimitive;\r\n        const numElements = this.numElements;\r\n        const numInstances = this.numInstances;\r\n        const currentVertexArray = this.currentVertexArray;\r\n        const offsets = this.offsets;\r\n        const numDraws = this.numDraws;\r\n        let indexed = false;\r\n        this.currentProgram.bind();\r\n        if (currentVertexArray) {\r\n            currentVertexArray.bind();\r\n            indexed = currentVertexArray.indexed;\r\n        }\r\n        for (let uIndex = 0; uIndex < this.uniformCount; uIndex++) {\r\n            this.currentProgram.uniform(uniformNames[uIndex], uniformValues[uIndex]);\r\n        }\r\n        for (let base = 0; base < uniformBlockCount; base++) {\r\n            uniformBuffers[base].bind(base);\r\n        }\r\n        for (let tIndex = 0; tIndex < textureCount; tIndex++) {\r\n            textures[tIndex].bind(tIndex);\r\n        }\r\n        if (appState.multiDrawInstanced) {\r\n            const ext = appState.extensions.multiDrawInstanced;\r\n            if (indexed) {\r\n                ext.multiDrawElementsInstancedWEBGL(drawPrimitive, numElements, 0, currentVertexArray.indexType, offsets, 0, numInstances, 0, numDraws);\r\n            }\r\n            else {\r\n                ext.multiDrawArraysInstancedWEBGL(drawPrimitive, offsets, 0, numElements, 0, numInstances, 0, numDraws);\r\n            }\r\n        }\r\n        else if (indexed) {\r\n            for (let i = 0; i < numDraws; i++) {\r\n                gl.drawElementsInstanced(drawPrimitive, numElements[i], currentVertexArray.indexType, offsets[i], numInstances[i]);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < numDraws; i++) {\r\n                gl.drawArraysInstanced(drawPrimitive, offsets[i], numElements[i], numInstances[i]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=DrawCall.js.map","export class Renderbuffer {\r\n    constructor(gl, width, height, internalFormat, samples = 0) {\r\n        this.is3D = false;\r\n        this.gl = gl;\r\n        this.renderbuffer = null;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.internalFormat = internalFormat;\r\n        this.samples = samples;\r\n        this.restore();\r\n    }\r\n    restore() {\r\n        this.renderbuffer = this.gl.createRenderbuffer();\r\n        this.resize(this.width, this.height);\r\n        return this;\r\n    }\r\n    resize(width, height) {\r\n        const gl = this.gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this.renderbuffer);\r\n        gl.renderbufferStorageMultisample(gl.RENDERBUFFER, this.samples, this.internalFormat, width, height);\r\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\r\n        return this;\r\n    }\r\n    delete() {\r\n        this.gl.deleteRenderbuffer(this.renderbuffer);\r\n        this.renderbuffer = null;\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Renderbuffer.js.map","export class Texture {\r\n    constructor(gl, appState, binding, image, width = 0, height = 0, depth = 0, is3D = false, options = {}) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.binding = binding;\r\n        this.texture = null;\r\n        if (image && image.width) {\r\n            width = image.width;\r\n        }\r\n        if (image && image.height) {\r\n            height = image.height;\r\n        }\r\n        this.width = width;\r\n        this.height = height;\r\n        this.depth = depth;\r\n        this.is3D = is3D;\r\n        this.compressed = (options.compressed) ? true : false;\r\n        if (this.compressed) {\r\n            this.internalFormat = options.internalFormat;\r\n            this.format = this.internalFormat;\r\n            this.type = gl.UNSIGNED_BYTE;\r\n        }\r\n        else {\r\n            if (options.internalFormat) {\r\n                this.internalFormat = options.internalFormat;\r\n                this.format = options.format;\r\n                this.type = options.type;\r\n            }\r\n            else {\r\n                //  Defaults\r\n                this.internalFormat = gl.RGBA8;\r\n                this.format = gl.RGBA;\r\n                this.type = gl.UNSIGNED_BYTE;\r\n            }\r\n        }\r\n        // -1 indicates unbound\r\n        this.currentUnit = -1;\r\n        const { minFilter = image ? gl.LINEAR_MIPMAP_NEAREST : gl.NEAREST, magFilter = image ? gl.LINEAR : gl.NEAREST, wrapS = gl.REPEAT, wrapT = gl.REPEAT, wrapR = gl.REPEAT, compareMode = gl.NONE, compareFunc = gl.LEQUAL, minLOD = null, maxLOD = null, baseLevel = null, maxLevel = null, maxAnisotropy = 1, flipY = true, premultiplyAlpha = true } = options;\r\n        this.minFilter = minFilter;\r\n        this.magFilter = magFilter;\r\n        this.wrapS = wrapS;\r\n        this.wrapT = wrapT;\r\n        this.wrapR = wrapR;\r\n        this.compareMode = compareMode;\r\n        this.compareFunc = compareFunc;\r\n        this.minLOD = minLOD;\r\n        this.maxLOD = maxLOD;\r\n        this.baseLevel = baseLevel;\r\n        this.maxLevel = maxLevel;\r\n        this.maxAnisotropy = Math.min(maxAnisotropy, appState.maxTextureAnisotropy);\r\n        this.flipY = flipY;\r\n        this.premultiplyAlpha = premultiplyAlpha;\r\n        this.mipmaps = (minFilter === gl.LINEAR_MIPMAP_NEAREST || minFilter === gl.LINEAR_MIPMAP_LINEAR);\r\n        this.restore(image);\r\n    }\r\n    restore(image) {\r\n        this.texture = null;\r\n        this.resize(this.width, this.height, this.depth);\r\n        if (image) {\r\n            this.data(image);\r\n        }\r\n        return this;\r\n    }\r\n    resize(width, height, depth = 0) {\r\n        const gl = this.gl;\r\n        const binding = this.binding;\r\n        let texture = this.texture;\r\n        if (texture && width === this.width && height === this.height && depth === this.depth) {\r\n            return this;\r\n        }\r\n        if (texture) {\r\n            gl.deleteTexture(texture);\r\n        }\r\n        if (this.currentUnit !== -1) {\r\n            this.appState.textures[this.currentUnit] = null;\r\n        }\r\n        texture = gl.createTexture();\r\n        this.texture = texture;\r\n        this.bind(Math.max(this.currentUnit, 0));\r\n        this.width = width;\r\n        this.height = height;\r\n        this.depth = depth;\r\n        gl.texParameteri(binding, gl.TEXTURE_MIN_FILTER, this.minFilter);\r\n        gl.texParameteri(binding, gl.TEXTURE_MAG_FILTER, this.magFilter);\r\n        gl.texParameteri(binding, gl.TEXTURE_WRAP_S, this.wrapS);\r\n        gl.texParameteri(binding, gl.TEXTURE_WRAP_T, this.wrapT);\r\n        gl.texParameteri(binding, gl.TEXTURE_WRAP_R, this.wrapR);\r\n        gl.texParameteri(binding, gl.TEXTURE_COMPARE_FUNC, this.compareFunc);\r\n        gl.texParameteri(binding, gl.TEXTURE_COMPARE_MODE, this.compareMode);\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.flipY);\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\r\n        if (this.minLOD !== null) {\r\n            gl.texParameterf(binding, gl.TEXTURE_MIN_LOD, this.minLOD);\r\n        }\r\n        if (this.maxLOD !== null) {\r\n            gl.texParameterf(binding, gl.TEXTURE_MAX_LOD, this.maxLOD);\r\n        }\r\n        if (this.baseLevel !== null) {\r\n            gl.texParameteri(binding, gl.TEXTURE_BASE_LEVEL, this.baseLevel);\r\n        }\r\n        if (this.maxLevel !== null) {\r\n            gl.texParameteri(binding, gl.TEXTURE_MAX_LEVEL, this.maxLevel);\r\n        }\r\n        if (this.maxAnisotropy > 1) {\r\n            gl.texParameteri(binding, this.appState.textureAnisotropy.TEXTURE_MAX_ANISOTROPY_EXT, this.maxAnisotropy);\r\n        }\r\n        let levels = 1;\r\n        if (this.is3D) {\r\n            if (this.mipmaps) {\r\n                levels = Math.floor(Math.log2(Math.max(Math.max(width, height), depth))) + 1;\r\n            }\r\n            gl.texStorage3D(binding, levels, this.internalFormat, width, height, depth);\r\n        }\r\n        else {\r\n            if (this.mipmaps) {\r\n                levels = Math.floor(Math.log2(Math.max(width, height))) + 1;\r\n            }\r\n            gl.texStorage2D(binding, levels, this.internalFormat, width, height);\r\n        }\r\n        return this;\r\n    }\r\n    data(data) {\r\n        const gl = this.gl;\r\n        const binding = this.binding;\r\n        const source = (Array.isArray(data)) ? data : [data];\r\n        let width = this.width;\r\n        let height = this.height;\r\n        let depth = this.depth;\r\n        const format = this.format;\r\n        const type = this.type;\r\n        const is3D = this.is3D;\r\n        const numLevels = (this.mipmaps) ? source.length : 1;\r\n        const generateMipmaps = (this.mipmaps && source.length === 1);\r\n        let i;\r\n        this.bind(Math.max(this.currentUnit, 0));\r\n        if (this.compressed) {\r\n            if (is3D) {\r\n                for (i = 0; i < numLevels; i++) {\r\n                    gl.compressedTexSubImage3D(binding, i, 0, 0, 0, width, height, depth, format, source[i]);\r\n                    // tslint:disable-next-line: no-bitwise\r\n                    width = Math.max(width >> 1, 1);\r\n                    // tslint:disable-next-line: no-bitwise\r\n                    height = Math.max(height >> 1, 1);\r\n                    // tslint:disable-next-line: no-bitwise\r\n                    depth = Math.max(depth >> 1, 1);\r\n                }\r\n            }\r\n            else {\r\n                for (i = 0; i < numLevels; i++) {\r\n                    gl.compressedTexSubImage2D(binding, i, 0, 0, width, height, format, source[i]);\r\n                    // tslint:disable-next-line: no-bitwise\r\n                    width = Math.max(width >> 1, 1);\r\n                    // tslint:disable-next-line: no-bitwise\r\n                    height = Math.max(height >> 1, 1);\r\n                }\r\n            }\r\n        }\r\n        else if (is3D) {\r\n            for (i = 0; i < numLevels; i++) {\r\n                gl.texSubImage3D(binding, i, 0, 0, 0, width, height, depth, format, type, source[i]);\r\n                // tslint:disable-next-line: no-bitwise\r\n                width = Math.max(width >> 1, 1);\r\n                // tslint:disable-next-line: no-bitwise\r\n                height = Math.max(height >> 1, 1);\r\n                // tslint:disable-next-line: no-bitwise\r\n                depth = Math.max(depth >> 1, 1);\r\n            }\r\n        }\r\n        else {\r\n            for (i = 0; i < numLevels; i++) {\r\n                gl.texSubImage2D(binding, i, 0, 0, width, height, format, type, source[i]);\r\n                // tslint:disable-next-line: no-bitwise\r\n                width = Math.max(width >> 1, 1);\r\n                // tslint:disable-next-line: no-bitwise\r\n                height = Math.max(height >> 1, 1);\r\n            }\r\n        }\r\n        if (generateMipmaps) {\r\n            gl.generateMipmap(binding);\r\n        }\r\n        return this;\r\n    }\r\n    delete() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        if (this.texture) {\r\n            gl.deleteTexture(this.texture);\r\n            this.texture = null;\r\n            if (this.currentUnit !== -1 && appState.textures[this.currentUnit] === this) {\r\n                appState.textures[this.currentUnit] = null;\r\n                this.currentUnit = -1;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    bind(unit) {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const currentTexture = appState.textures[unit];\r\n        if (currentTexture !== this) {\r\n            if (currentTexture) {\r\n                currentTexture.currentUnit = -1;\r\n            }\r\n            if (this.currentUnit !== -1) {\r\n                appState.textures[this.currentUnit] = null;\r\n            }\r\n            gl.activeTexture(gl.TEXTURE0 + unit);\r\n            gl.bindTexture(this.binding, this.texture);\r\n            appState.textures[unit] = this;\r\n            this.currentUnit = unit;\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Texture.js.map","import { Renderbuffer } from './Renderbuffer';\r\nimport { Texture } from './Texture';\r\nexport class Framebuffer {\r\n    constructor(gl, appState) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.framebuffer = null;\r\n        this.numColorTargets = 0;\r\n        this.colorAttachments = [];\r\n        this.colorAttachmentEnums = [];\r\n        this.colorAttachmentTargets = [];\r\n        this.depthAttachment = null;\r\n        this.depthAttachmentTarget = null;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.restore();\r\n    }\r\n    restore() {\r\n        const appState = this.appState;\r\n        if (appState.drawFramebuffer === this) {\r\n            appState.drawFramebuffer = null;\r\n        }\r\n        if (appState.readFramebuffer === this) {\r\n            appState.readFramebuffer = null;\r\n        }\r\n        this.framebuffer = this.gl.createFramebuffer();\r\n        return this;\r\n    }\r\n    colorTarget(index, attachment, target) {\r\n        const gl = this.gl;\r\n        if (target === undefined) {\r\n            target = (attachment.is3D) ? 0 : gl.TEXTURE_2D;\r\n        }\r\n        const colorAttachmentEnums = this.colorAttachmentEnums;\r\n        const colorAttachments = this.colorAttachments;\r\n        const colorAttachmentTargets = this.colorAttachmentTargets;\r\n        if (index >= this.numColorTargets) {\r\n            const numColorTargets = index + 1;\r\n            colorAttachmentEnums.length = numColorTargets;\r\n            colorAttachments.length = numColorTargets;\r\n            colorAttachmentTargets.length = numColorTargets;\r\n            for (let i = this.numColorTargets; i < numColorTargets - 1; i++) {\r\n                colorAttachmentEnums[i] = gl.NONE;\r\n                colorAttachments[i] = null;\r\n                colorAttachmentTargets[i] = 0;\r\n            }\r\n            this.numColorTargets = numColorTargets;\r\n        }\r\n        colorAttachmentEnums[index] = gl.COLOR_ATTACHMENT0 + index;\r\n        colorAttachments[index] = attachment;\r\n        colorAttachmentTargets[index] = target;\r\n        const currentFramebuffer = this.bindAndCaptureState();\r\n        if (attachment instanceof Renderbuffer) {\r\n            gl.framebufferRenderbuffer(gl.DRAW_FRAMEBUFFER, colorAttachmentEnums[index], gl.RENDERBUFFER, attachment.renderbuffer);\r\n        }\r\n        else if (attachment.is3D) {\r\n            gl.framebufferTextureLayer(gl.DRAW_FRAMEBUFFER, colorAttachmentEnums[index], attachment.texture, 0, target);\r\n        }\r\n        else {\r\n            gl.framebufferTexture2D(gl.DRAW_FRAMEBUFFER, colorAttachmentEnums[index], target, attachment.texture, 0);\r\n        }\r\n        gl.drawBuffers(this.colorAttachmentEnums);\r\n        this.width = attachment.width;\r\n        this.height = attachment.height;\r\n        this.restoreState(currentFramebuffer);\r\n        return this;\r\n    }\r\n    depthTarget(attachment, target) {\r\n        const gl = this.gl;\r\n        if (target === undefined) {\r\n            target = (attachment.is3D) ? 0 : gl.TEXTURE_2D;\r\n        }\r\n        const currentFramebuffer = this.bindAndCaptureState();\r\n        this.depthAttachment = attachment;\r\n        this.depthAttachmentTarget = target;\r\n        if (attachment instanceof Renderbuffer) {\r\n            gl.framebufferRenderbuffer(gl.DRAW_FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, attachment.renderbuffer);\r\n        }\r\n        else if (attachment.is3D) {\r\n            gl.framebufferTextureLayer(gl.DRAW_FRAMEBUFFER, gl.DEPTH_ATTACHMENT, attachment.texture, 0, target);\r\n        }\r\n        else {\r\n            gl.framebufferTexture2D(gl.DRAW_FRAMEBUFFER, gl.DEPTH_ATTACHMENT, target, attachment.texture, 0);\r\n        }\r\n        this.width = attachment.width;\r\n        this.height = attachment.height;\r\n        this.restoreState(currentFramebuffer);\r\n        return this;\r\n    }\r\n    resize(width, height) {\r\n        const gl = this.gl;\r\n        if (!width) {\r\n            width = gl.drawingBufferWidth;\r\n        }\r\n        if (!height) {\r\n            height = gl.drawingBufferHeight;\r\n        }\r\n        const currentFramebuffer = this.bindAndCaptureState();\r\n        const colorAttachmentEnums = this.colorAttachmentEnums;\r\n        const colorAttachments = this.colorAttachments;\r\n        const colorAttachmentTargets = this.colorAttachmentTargets;\r\n        for (let i = 0; i < this.numColorTargets; i++) {\r\n            const attachment = colorAttachments[i];\r\n            if (!attachment) {\r\n                continue;\r\n            }\r\n            attachment.resize(width, height);\r\n            if (attachment instanceof Texture) {\r\n                // Texture resizing recreates the texture object.\r\n                if (attachment.is3D) {\r\n                    gl.framebufferTextureLayer(gl.DRAW_FRAMEBUFFER, colorAttachmentEnums[i], attachment.texture, 0, colorAttachmentTargets[i]);\r\n                }\r\n                else {\r\n                    gl.framebufferTexture2D(gl.DRAW_FRAMEBUFFER, colorAttachmentEnums[i], colorAttachmentTargets[i], attachment.texture, 0);\r\n                }\r\n            }\r\n        }\r\n        const depthAttachment = this.depthAttachment;\r\n        if (depthAttachment) {\r\n            depthAttachment.resize(width, height);\r\n            if (depthAttachment instanceof Texture) {\r\n                // Texture resizing recreates the texture object.\r\n                if (depthAttachment.is3D) {\r\n                    gl.framebufferTextureLayer(gl.DRAW_FRAMEBUFFER, gl.DEPTH_ATTACHMENT, depthAttachment.texture, 0, this.depthAttachmentTarget);\r\n                }\r\n                else {\r\n                    gl.framebufferTexture2D(gl.DRAW_FRAMEBUFFER, gl.DEPTH_ATTACHMENT, this.depthAttachmentTarget, depthAttachment.texture, 0);\r\n                }\r\n            }\r\n        }\r\n        this.width = width;\r\n        this.height = height;\r\n        this.restoreState(currentFramebuffer);\r\n        return this;\r\n    }\r\n    delete() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        if (this.framebuffer) {\r\n            gl.deleteFramebuffer(this.framebuffer);\r\n            this.framebuffer = null;\r\n            if (appState.drawFramebuffer === this) {\r\n                gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\r\n                appState.drawFramebuffer = null;\r\n            }\r\n            if (appState.readFramebuffer === this) {\r\n                gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);\r\n                appState.readFramebuffer = null;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    getStatus() {\r\n        const gl = this.gl;\r\n        const currentFramebuffer = this.bindAndCaptureState();\r\n        const status = gl.checkFramebufferStatus(gl.DRAW_FRAMEBUFFER);\r\n        this.restoreState(currentFramebuffer);\r\n        return status;\r\n    }\r\n    bindForDraw() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        if (appState.drawFramebuffer !== this) {\r\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.framebuffer);\r\n            appState.drawFramebuffer = this;\r\n        }\r\n        return this;\r\n    }\r\n    bindForRead() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        if (appState.readFramebuffer !== this) {\r\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.framebuffer);\r\n            appState.readFramebuffer = this;\r\n        }\r\n        return this;\r\n    }\r\n    bindAndCaptureState() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const currentFramebuffer = appState.drawFramebuffer;\r\n        if (currentFramebuffer !== this) {\r\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.framebuffer);\r\n        }\r\n        return currentFramebuffer;\r\n    }\r\n    restoreState(framebuffer) {\r\n        const gl = this.gl;\r\n        if (framebuffer !== this) {\r\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, (framebuffer) ? framebuffer.framebuffer : null);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Framebuffer.js.map","const TYPE_SIZE = {\r\n    0x1400: 1,\r\n    0x1401: 1,\r\n    0x1402: 2,\r\n    0x1403: 2,\r\n    0x1404: 4,\r\n    0x1405: 4,\r\n    0x1406: 4 // FLOAT\r\n};\r\nexport function GetTypeSize(type) {\r\n    return TYPE_SIZE[type];\r\n}\r\n//# sourceMappingURL=GetTypeSize.js.map","const FV = 'fv';\r\nconst SAMPLER_TYPE = ['1i', 1, Int32Array, false];\r\nconst glConstMap = {\r\n    0x8B5E: SAMPLER_TYPE,\r\n    0x8DC1: SAMPLER_TYPE,\r\n    0x8B62: SAMPLER_TYPE,\r\n    0x8DC4: SAMPLER_TYPE,\r\n    0x8DCA: SAMPLER_TYPE,\r\n    0x8DCF: SAMPLER_TYPE,\r\n    0x8DD2: SAMPLER_TYPE,\r\n    0x8DD7: SAMPLER_TYPE,\r\n    0x8B60: SAMPLER_TYPE,\r\n    0x8DCC: SAMPLER_TYPE,\r\n    0x8DD4: SAMPLER_TYPE,\r\n    0x8DC5: SAMPLER_TYPE,\r\n    0x8B5F: SAMPLER_TYPE,\r\n    0x8DCB: SAMPLER_TYPE,\r\n    0x8DD3: SAMPLER_TYPE,\r\n    0x1406: ['1f', 1, Float32Array, false, 1, 0x1406, 1],\r\n    0x8B50: ['2f', 2, Float32Array, false, 2, 0x1406, 2],\r\n    0x8B51: ['3f', 3, Float32Array, false, 4, 0x1406, 4],\r\n    0x8B52: ['4f', 4, Float32Array, false, 4, 0x1406, 4],\r\n    0x1404: ['1i', 1, Int32Array, false, 1, 0x1404, 1],\r\n    0x8B53: ['2i', 2, Int32Array, false, 2, 0x1404, 2],\r\n    0x8B54: ['3i', 3, Int32Array, false, 4, 0x1404, 4],\r\n    0x8B55: ['4i', 4, Int32Array, false, 4, 0x1404, 4],\r\n    0x1405: ['1ui', 1, Uint32Array, false, 1, 0x1405, 1],\r\n    0x8DC6: ['2ui', 2, Uint32Array, false, 2, 0x1405, 2],\r\n    0x8DC7: ['3ui', 3, Uint32Array, false, 4, 0x1405, 4],\r\n    0x8DC8: ['4ui', 4, Uint32Array, false, 4, 0x1405, 4],\r\n    0x8B5A: ['2' + FV, 4, Float32Array, true, 4, 0x1406, 8],\r\n    0x8B5B: ['3' + FV, 9, Float32Array, true, 4, 0x1406, 12],\r\n    0x8B5C: ['4' + FV, 16, Float32Array, true, 4, 0x1406, 16],\r\n    0x8B65: ['2x3' + FV, 6, Float32Array, true, 4, 0x1406, 8],\r\n    0x8B66: ['2x4' + FV, 8, Float32Array, true, 4, 0x1406, 8],\r\n    0x8B67: ['3x2' + FV, 6, Float32Array, true, 4, 0x1406, 12],\r\n    0x8B68: ['3x4' + FV, 12, Float32Array, true, 4, 0x1406, 12],\r\n    0x8B69: ['4x2' + FV, 8, Float32Array, true, 4, 0x1406, 16],\r\n    0x8B6A: ['4x3' + FV, 12, Float32Array, true, 4, 0x1406, 16],\r\n    0x8B56: ['1iv', 1, Array, false, 1, 0x1406, 1],\r\n    0x8B57: ['2iv', 2, Array, false, 2, 0x1406, 2],\r\n    0x8B58: ['3iv', 3, Array, false, 4, 0x1406, 4],\r\n    0x8B59: ['4iv', 4, Array, false, 4, 0x1406, 4] // BOOL_VEC4\r\n};\r\nexport function GetUniformSize(type) {\r\n    const uniformData = glConstMap[type];\r\n    if (uniformData) {\r\n        return {\r\n            size: uniformData[4],\r\n            uboType: uniformData[5],\r\n            stride: uniformData[6]\r\n        };\r\n    }\r\n    return null;\r\n}\r\nexport function GetUniform(gl, type) {\r\n    const uniformData = glConstMap[type];\r\n    if (uniformData) {\r\n        let name = 'uniform';\r\n        if (uniformData[3]) {\r\n            name = name.concat('Matrix');\r\n        }\r\n        return {\r\n            glFunc: gl[name + uniformData[0]],\r\n            size: uniformData[1],\r\n            cacheClass: (size) => new uniformData[2](size)\r\n        };\r\n    }\r\n    return null;\r\n}\r\n//# sourceMappingURL=GetUniform.js.map","import { GetUniform } from './GetUniform';\r\nexport class MatrixUniform {\r\n    constructor(gl, handle, info, count) {\r\n        this.gl = gl;\r\n        this.handle = handle;\r\n        this.count = count;\r\n        const uniformData = GetUniform(gl, info.type);\r\n        this.glFunc = uniformData.glFunc.bind(gl);\r\n        this.cache = uniformData.cacheClass(uniformData.size * count);\r\n    }\r\n    set(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (this.cache[i] !== value[i]) {\r\n                this.glFunc(this.handle, false, value);\r\n                this.cache.set(value);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MatrixUniform.js.map","import { GetUniform } from './GetUniform';\r\nexport class MultiBoolUniform {\r\n    constructor(gl, handle, info, count) {\r\n        this.gl = gl;\r\n        this.handle = handle;\r\n        this.count = count;\r\n        const uniformData = GetUniform(gl, info.type);\r\n        this.glFunc = uniformData.glFunc;\r\n        this.cache = new Array(uniformData.size * count).fill(false);\r\n    }\r\n    set(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (this.cache[i] !== value[i]) {\r\n                this.glFunc(this.handle, value);\r\n                for (let j = i; j < value.length; j++) {\r\n                    this.cache[j] = value[j];\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MultiBoolUniform.js.map","import { GetUniform } from './GetUniform';\r\nexport class MultiNumericUniform {\r\n    constructor(gl, handle, info, count) {\r\n        this.gl = gl;\r\n        this.handle = handle;\r\n        this.count = count;\r\n        const uniformData = GetUniform(gl, info.type);\r\n        this.glFunc = uniformData.glFunc;\r\n        this.cache = uniformData.cacheClass(uniformData.size * count);\r\n    }\r\n    set(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (this.cache[i] !== value[i]) {\r\n                this.glFunc(this.handle, value);\r\n                this.cache.set(value);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MultiNumericUniform.js.map","export const UNIFORMS = {\r\n    SAMPLER: [\r\n        0x8B5E,\r\n        0x8DCA,\r\n        0x8DD2,\r\n        0x8B62,\r\n        0x8DC1,\r\n        0x8DCF,\r\n        0x8DD7,\r\n        0x8DC4,\r\n        0x8B60,\r\n        0x8DCC,\r\n        0x8DD4,\r\n        0x8DC5,\r\n        0x8B5F,\r\n        0x8DCB,\r\n        0x8DD3 // UNSIGNED_INT_SAMPLER_3D\r\n    ],\r\n    VEC: [\r\n        0x8B50,\r\n        0x8B53,\r\n        0x8DC6,\r\n        0x8B51,\r\n        0x8B54,\r\n        0x8DC7,\r\n        0x8B52,\r\n        0x8B55,\r\n        0x8DC8 // UNSIGNED_INT_VEC4\r\n    ],\r\n    BOOL: [\r\n        0x8B56,\r\n        0x8B57,\r\n        0x8B58,\r\n        0x8B59 // BOOL_VEC4\r\n    ],\r\n    MAT: [\r\n        0x8B5A,\r\n        0x8B5B,\r\n        0x8B5C,\r\n        0x8B65,\r\n        0x8B66,\r\n        0x8B67,\r\n        0x8B68,\r\n        0x8B69,\r\n        0x8B6A // FLOAT_MAT4x3\r\n    ]\r\n};\r\n//# sourceMappingURL=const.js.map","export class Shader {\r\n    constructor(gl, appState, type, source) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        //  Either gl.VERTEX_SHADER or gl.FRAGMENT_SHADER\r\n        this.type = type;\r\n        this.source = source;\r\n        this.restore();\r\n    }\r\n    restore() {\r\n        const gl = this.gl;\r\n        const shader = gl.createShader(this.type);\r\n        gl.shaderSource(shader, this.source);\r\n        gl.compileShader(shader);\r\n        this.shader = shader;\r\n        return this;\r\n    }\r\n    delete() {\r\n        if (this.shader) {\r\n            this.gl.deleteShader(this.shader);\r\n            this.shader = null;\r\n        }\r\n        return this;\r\n    }\r\n    checkCompilation() {\r\n        const gl = this.gl;\r\n        const shader = this.shader;\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            console.error(gl.getShaderInfoLog(shader));\r\n            // tslint:disable-next-line: quotemark\r\n            const lines = this.source.split(\"\\n\");\r\n            for (let i = 0; i < lines.length; ++i) {\r\n                console.error(`${i + 1}: ${lines[i]}`);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Shader.js.map","import { GetUniform } from './GetUniform';\r\nexport class SingleComponentUniform {\r\n    constructor(gl, handle, info) {\r\n        this.gl = gl;\r\n        this.handle = handle;\r\n        const uniformData = GetUniform(gl, info.type);\r\n        this.glFunc = uniformData.glFunc;\r\n        this.cache = (info.type === gl.BOOL) ? false : 0;\r\n    }\r\n    set(value) {\r\n        if (this.cache !== value) {\r\n            this.glFunc(this.handle, value);\r\n            this.cache = value;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SingleComponentUniform.js.map","import { UNIFORMS } from './const';\r\nimport { MatrixUniform } from './MatrixUniform';\r\nimport { MultiBoolUniform } from './MultiBoolUniform';\r\nimport { MultiNumericUniform } from './MultiNumericUniform';\r\nimport { Shader } from './Shader';\r\nimport { SingleComponentUniform } from './SingleComponentUniform';\r\nexport class Program {\r\n    constructor(gl, appState, vsSource, fsSource) {\r\n        this.uniforms = {};\r\n        this.uniformBlocks = {};\r\n        this.uniformBlockCount = 0;\r\n        this.samplers = {};\r\n        this.samplerCount = 0;\r\n        this.linked = false;\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        if (typeof vsSource === 'string') {\r\n            this.vertexSource = vsSource;\r\n        }\r\n        else {\r\n            this.vertexShader = vsSource;\r\n        }\r\n        if (typeof fsSource === 'string') {\r\n            this.fragmentSource = fsSource;\r\n        }\r\n        else {\r\n            this.fragmentShader = fsSource;\r\n        }\r\n        this.initialize();\r\n    }\r\n    initialize() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        if (appState.program === this) {\r\n            gl.useProgram(null);\r\n            appState.program = null;\r\n        }\r\n        this.linked = false;\r\n        this.uniformBlockCount = 0;\r\n        this.samplerCount = 0;\r\n        if (this.vertexSource) {\r\n            this.vertexShader = new Shader(gl, appState, gl.VERTEX_SHADER, this.vertexSource);\r\n        }\r\n        if (this.fragmentSource) {\r\n            this.fragmentShader = new Shader(gl, appState, gl.FRAGMENT_SHADER, this.fragmentSource);\r\n        }\r\n        this.program = this.gl.createProgram();\r\n        return this;\r\n    }\r\n    link() {\r\n        const gl = this.gl;\r\n        const program = this.program;\r\n        gl.attachShader(program, this.vertexShader.shader);\r\n        gl.attachShader(program, this.fragmentShader.shader);\r\n        gl.linkProgram(program);\r\n        return this;\r\n    }\r\n    checkCompletion() {\r\n        if (this.gl.getExtension('KHR_parallel_shader_compile')) {\r\n            // COMPLETION_STATUS_KHR\r\n            return this.gl.getProgramParameter(this.program, 0x91B1);\r\n        }\r\n        return true;\r\n    }\r\n    checkLinkage() {\r\n        if (this.linked) {\r\n            return this;\r\n        }\r\n        const gl = this.gl;\r\n        const program = this.program;\r\n        if (gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n            this.linked = true;\r\n            this.initVariables();\r\n        }\r\n        else {\r\n            console.error(gl.getProgramInfoLog(program));\r\n            this.vertexShader.checkCompilation();\r\n            this.fragmentShader.checkCompilation();\r\n        }\r\n        if (this.vertexSource) {\r\n            this.vertexShader.delete();\r\n            this.vertexShader = null;\r\n        }\r\n        if (this.fragmentSource) {\r\n            this.fragmentShader.delete();\r\n            this.fragmentShader = null;\r\n        }\r\n        return this;\r\n    }\r\n    initVariables() {\r\n        this.bind();\r\n        const gl = this.gl;\r\n        const program = this.program;\r\n        const numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n        let textureUnit;\r\n        for (let i = 0; i < numUniforms; i++) {\r\n            const uniformInfo = gl.getActiveUniform(program, i);\r\n            const uniformHandle = gl.getUniformLocation(program, uniformInfo.name);\r\n            const type = uniformInfo.type;\r\n            const numElements = uniformInfo.size;\r\n            if (UNIFORMS.SAMPLER.indexOf(type) !== -1) {\r\n                textureUnit = this.samplerCount++;\r\n                this.samplers[uniformInfo.name] = textureUnit;\r\n                gl.uniform1i(uniformHandle, textureUnit);\r\n            }\r\n            else if (UNIFORMS.VEC.indexOf(type) !== -1) {\r\n                this.uniforms[uniformInfo.name] = new MultiNumericUniform(gl, uniformHandle, uniformInfo, numElements);\r\n            }\r\n            else if (UNIFORMS.MAT.indexOf(type) !== -1) {\r\n                this.uniforms[uniformInfo.name] = new MatrixUniform(gl, uniformHandle, uniformInfo, numElements);\r\n            }\r\n            else if (UNIFORMS.BOOL.indexOf(type) !== -1) {\r\n                if (numElements > 1) {\r\n                    this.uniforms[uniformInfo.name] = new MultiBoolUniform(gl, uniformHandle, uniformInfo, numElements);\r\n                }\r\n                else {\r\n                    this.uniforms[uniformInfo.name] = new SingleComponentUniform(gl, uniformHandle, uniformInfo);\r\n                }\r\n            }\r\n            else if (type === gl.INT || type === gl.UNSIGNED_INT || type === gl.FLOAT) {\r\n                if (numElements > 1) {\r\n                    this.uniforms[uniformInfo.name] = new MultiNumericUniform(gl, uniformHandle, uniformInfo, numElements);\r\n                }\r\n                else {\r\n                    this.uniforms[uniformInfo.name] = new SingleComponentUniform(gl, uniformHandle, uniformInfo);\r\n                }\r\n            }\r\n            else {\r\n                console.error('Unknown uniform type');\r\n            }\r\n        }\r\n        const numUniformBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\r\n        for (let i = 0; i < numUniformBlocks; i++) {\r\n            const blockName = gl.getActiveUniformBlockName(program, i);\r\n            const blockIndex = gl.getUniformBlockIndex(program, blockName);\r\n            const uniformBlockBase = this.uniformBlockCount++;\r\n            gl.uniformBlockBinding(program, blockIndex, uniformBlockBase);\r\n            this.uniformBlocks[blockName] = uniformBlockBase;\r\n        }\r\n    }\r\n    uniform(name, value) {\r\n        if (this.uniforms[name]) {\r\n            this.uniforms[name].set(value);\r\n        }\r\n        return this;\r\n    }\r\n    bind() {\r\n        const appState = this.appState;\r\n        if (appState.program !== this) {\r\n            this.gl.useProgram(this.program);\r\n            appState.program = this;\r\n        }\r\n        return this;\r\n    }\r\n    delete() {\r\n        if (this.program) {\r\n            this.gl.deleteProgram(this.program);\r\n            this.program = null;\r\n            if (this.appState.program === this) {\r\n                this.gl.useProgram(null);\r\n                this.appState.program = null;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Program.js.map","export class Query {\r\n    constructor(gl, target) {\r\n        this.gl = gl;\r\n        this.query = null;\r\n        this.target = target;\r\n        this.active = false;\r\n        this.result = null;\r\n        this.restore();\r\n    }\r\n    restore() {\r\n        this.query = this.gl.createQuery();\r\n        this.active = false;\r\n        this.result = null;\r\n        return this;\r\n    }\r\n    begin() {\r\n        if (!this.active) {\r\n            this.gl.beginQuery(this.target, this.query);\r\n            this.result = null;\r\n        }\r\n        return this;\r\n    }\r\n    end() {\r\n        if (!this.active) {\r\n            this.gl.endQuery(this.target);\r\n            this.active = true;\r\n        }\r\n        return this;\r\n    }\r\n    ready() {\r\n        const gl = this.gl;\r\n        if (this.active && gl.getQueryParameter(this.query, gl.QUERY_RESULT_AVAILABLE)) {\r\n            this.active = false;\r\n            this.result = gl.getQueryParameter(this.query, gl.QUERY_RESULT);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    delete() {\r\n        if (this.query) {\r\n            this.gl.deleteQuery(this.query);\r\n            this.query = null;\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=Query.js.map","import { GetUniformSize } from './GetUniform';\r\nexport class UniformBuffer {\r\n    constructor(gl, appState, layout, usage = gl.DYNAMIC_DRAW) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.buffer = null;\r\n        this.dataViews = {};\r\n        const len = layout.length;\r\n        const offsets = new Array(len);\r\n        const sizes = new Array(len);\r\n        const types = new Array(len);\r\n        this.size = 0;\r\n        this.usage = usage;\r\n        // -1 indicates unbound\r\n        this.currentBase = -1;\r\n        for (let i = 0; i < len; i++) {\r\n            const { size, uboType, stride } = GetUniformSize(layout[i]);\r\n            if (size === 2) {\r\n                this.size += this.size % 2;\r\n            }\r\n            else if (size === 4) {\r\n                this.size += (4 - this.size % 4) % 4;\r\n            }\r\n            offsets[i] = this.size;\r\n            sizes[i] = stride;\r\n            types[i] = uboType;\r\n            this.size += stride;\r\n        }\r\n        this.offsets = offsets;\r\n        this.sizes = sizes;\r\n        this.types = types;\r\n        this.size += (4 - this.size % 4) % 4;\r\n        const data = new Float32Array(this.size);\r\n        this.dataViews[gl.FLOAT] = data;\r\n        this.dataViews[gl.INT] = new Int32Array(data.buffer);\r\n        this.dataViews[gl.UNSIGNED_INT] = new Uint32Array(data.buffer);\r\n        this.data = data;\r\n        this.dirtyStart = this.size;\r\n        this.dirtyEnd = 0;\r\n        this.restore();\r\n    }\r\n    restore() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const currentBase = this.currentBase;\r\n        if (currentBase !== -1 && appState.uniformBuffers[currentBase] === this) {\r\n            appState.uniformBuffers[currentBase] = null;\r\n        }\r\n        this.buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.buffer);\r\n        gl.bufferData(gl.UNIFORM_BUFFER, this.size * 4, this.usage);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        return this;\r\n    }\r\n    set(index, value) {\r\n        const view = this.dataViews[this.types[index]];\r\n        const offset = this.offsets[index];\r\n        const size = this.sizes[index];\r\n        if (this.sizes[index] === 1) {\r\n            view[offset] = value;\r\n        }\r\n        else {\r\n            view.set(value, offset);\r\n        }\r\n        if (offset < this.dirtyStart) {\r\n            this.dirtyStart = offset;\r\n        }\r\n        if (this.dirtyEnd < offset + size) {\r\n            this.dirtyEnd = offset + size;\r\n        }\r\n        return this;\r\n    }\r\n    update() {\r\n        const gl = this.gl;\r\n        if (this.dirtyStart >= this.dirtyEnd) {\r\n            return this;\r\n        }\r\n        const data = this.data.subarray(this.dirtyStart, this.dirtyEnd);\r\n        const offset = this.dirtyStart * 4;\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, this.buffer);\r\n        gl.bufferSubData(gl.UNIFORM_BUFFER, offset, data);\r\n        gl.bindBuffer(gl.UNIFORM_BUFFER, null);\r\n        this.dirtyStart = this.size;\r\n        this.dirtyEnd = 0;\r\n        return this;\r\n    }\r\n    delete() {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const currentBase = this.currentBase;\r\n        if (this.buffer) {\r\n            gl.deleteBuffer(this.buffer);\r\n            this.buffer = null;\r\n            if (currentBase !== -1 && appState.uniformBuffers[currentBase] === this) {\r\n                appState.uniformBuffers[currentBase] = null;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    bind(index) {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const currentBase = this.currentBase;\r\n        const currentBuffer = appState.uniformBuffers[index];\r\n        if (currentBuffer !== this) {\r\n            if (currentBuffer) {\r\n                currentBuffer.currentBase = -1;\r\n            }\r\n            if (currentBase !== -1) {\r\n                appState.uniformBuffers[currentBase] = null;\r\n            }\r\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, index, this.buffer);\r\n            appState.uniformBuffers[index] = this;\r\n            this.currentBase = index;\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=UniformBuffer.js.map","import { GetTypeSize } from './GetTypeSize';\r\nexport class VertexArray {\r\n    constructor(gl, appState) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.vertexArray = null;\r\n        this.indexType = null;\r\n        this.indexed = false;\r\n        this.numElements = 0;\r\n        this.numInstances = 1;\r\n        this.offsets = 0;\r\n        this.numDraws = 1;\r\n    }\r\n    restore() {\r\n        const appState = this.appState;\r\n        if (appState.vertexArray === this) {\r\n            appState.vertexArray = null;\r\n        }\r\n        // re-allocate at gl level, if necessary\r\n        if (this.vertexArray !== null) {\r\n            this.vertexArray = this.gl.createVertexArray();\r\n        }\r\n        return this;\r\n    }\r\n    vertexAttributeBuffer(attributeIndex, vertexBuffer, options) {\r\n        this.attributeBuffer(attributeIndex, vertexBuffer, options, false);\r\n        return this;\r\n    }\r\n    instanceAttributeBuffer(attributeIndex, vertexBuffer, options) {\r\n        this.attributeBuffer(attributeIndex, vertexBuffer, options, true);\r\n        return this;\r\n    }\r\n    indexBuffer(vertexBuffer) {\r\n        const gl = this.gl;\r\n        // allocate at gl level, if necessary\r\n        if (this.vertexArray === null) {\r\n            this.vertexArray = gl.createVertexArray();\r\n        }\r\n        this.bind();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, vertexBuffer.buffer);\r\n        this.numElements = vertexBuffer.numItems * 3;\r\n        this.indexType = vertexBuffer.type;\r\n        this.indexed = true;\r\n        return this;\r\n    }\r\n    delete() {\r\n        if (this.vertexArray) {\r\n            this.gl.deleteVertexArray(this.vertexArray);\r\n            this.vertexArray = null;\r\n            if (this.appState.vertexArray === this) {\r\n                this.gl.bindVertexArray(null);\r\n                this.appState.vertexArray = null;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    bind() {\r\n        if (this.appState.vertexArray !== this) {\r\n            this.gl.bindVertexArray(this.vertexArray);\r\n            this.appState.vertexArray = this;\r\n        }\r\n        return this;\r\n    }\r\n    attributeBuffer(attributeIndex, vertexBuffer, options = {}, instanced) {\r\n        const gl = this.gl;\r\n        // allocate at gl level, if necessary\r\n        if (this.vertexArray === null) {\r\n            this.vertexArray = gl.createVertexArray();\r\n        }\r\n        this.bind();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer.buffer);\r\n        const { type = vertexBuffer.type, size = vertexBuffer.itemSize, offset = 0, normalized = false, integer = Boolean(vertexBuffer.integer && !normalized) } = options;\r\n        let { stride = 0, } = options;\r\n        const numColumns = vertexBuffer.numColumns;\r\n        if (stride === 0) {\r\n            //  Set explicitly for matrix buffers\r\n            stride = numColumns * size * GetTypeSize(type);\r\n        }\r\n        for (let i = 0; i < numColumns; i++) {\r\n            if (integer) {\r\n                gl.vertexAttribIPointer(attributeIndex + i, size, type, stride, offset + i * size * GetTypeSize(type));\r\n            }\r\n            else {\r\n                gl.vertexAttribPointer(attributeIndex + i, size, type, normalized, stride, offset + i * size * GetTypeSize(type));\r\n            }\r\n            if (instanced) {\r\n                gl.vertexAttribDivisor(attributeIndex + i, 1);\r\n            }\r\n            gl.enableVertexAttribArray(attributeIndex + i);\r\n        }\r\n        if (this.numDraws === 1) {\r\n            if (instanced) {\r\n                this.numInstances = vertexBuffer.numItems;\r\n            }\r\n            else {\r\n                this.numElements = this.numElements || vertexBuffer.numItems;\r\n            }\r\n        }\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=VertexArray.js.map","import { GetTypeSize } from './GetTypeSize';\r\nexport class VertexBuffer {\r\n    constructor(gl, appState, type, itemSize, data, usage = gl.STATIC_DRAW, indexArray = false) {\r\n        this.gl = gl;\r\n        this.appState = appState;\r\n        this.buffer = null;\r\n        let numColumns = 1;\r\n        if (type === gl.FLOAT_MAT4 || type === gl.FLOAT_MAT4x2 || type === gl.FLOAT_MAT4x3) {\r\n            numColumns = 4;\r\n        }\r\n        else if (type === gl.FLOAT_MAT3 || type === gl.FLOAT_MAT3x2 || type === gl.FLOAT_MAT3x4) {\r\n            numColumns = 3;\r\n        }\r\n        else if (type === gl.FLOAT_MAT2 || type === gl.FLOAT_MAT2x3 || type === gl.FLOAT_MAT2x4) {\r\n            numColumns = 2;\r\n        }\r\n        if (type === gl.FLOAT_MAT4 || type === gl.FLOAT_MAT3x4 || type === gl.FLOAT_MAT2x4) {\r\n            itemSize = 4;\r\n            type = gl.FLOAT;\r\n        }\r\n        else if (type === gl.FLOAT_MAT3 || type === gl.FLOAT_MAT4x3 || type === gl.FLOAT_MAT2x3) {\r\n            itemSize = 3;\r\n            type = gl.FLOAT;\r\n        }\r\n        else if (type === gl.FLOAT_MAT2 || type === gl.FLOAT_MAT3x2 || type === gl.FLOAT_MAT4x2) {\r\n            itemSize = 2;\r\n            type = gl.FLOAT;\r\n        }\r\n        let dataLength;\r\n        let byteLength;\r\n        if (typeof data === 'number') {\r\n            dataLength = data;\r\n            if (type) {\r\n                data *= GetTypeSize(type);\r\n            }\r\n            byteLength = data;\r\n        }\r\n        else {\r\n            byteLength = data.byteLength;\r\n            //  Otherwise TypeScript moans that 'length' isn't a valid property, but it is.\r\n            dataLength = data['length'];\r\n        }\r\n        this.type = type;\r\n        this.itemSize = itemSize;\r\n        this.numItems = (type) ? dataLength / (itemSize * numColumns) : byteLength / itemSize;\r\n        this.numColumns = numColumns;\r\n        this.byteLength = byteLength;\r\n        this.usage = usage;\r\n        this.indexArray = Boolean(indexArray);\r\n        this.integer = (type === gl.BYTE || type === gl.UNSIGNED_BYTE || type === gl.SHORT || type === gl.UNSIGNED_SHORT || type === gl.INT || type === gl.UNSIGNED_INT);\r\n        this.binding = (this.indexArray) ? gl.ELEMENT_ARRAY_BUFFER : gl.ARRAY_BUFFER;\r\n        this.restore(data);\r\n    }\r\n    restore(data) {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const binding = this.binding;\r\n        if (appState.vertexArray) {\r\n            gl.bindVertexArray(null);\r\n            appState.vertexArray = null;\r\n        }\r\n        this.buffer = gl.createBuffer();\r\n        gl.bindBuffer(binding, this.buffer);\r\n        if (data === undefined) {\r\n            gl.bufferData(binding, this.byteLength, this.usage);\r\n        }\r\n        else {\r\n            gl.bufferData(binding, data, this.usage);\r\n        }\r\n        gl.bindBuffer(binding, null);\r\n        return this;\r\n    }\r\n    data(data) {\r\n        const gl = this.gl;\r\n        const appState = this.appState;\r\n        const binding = this.binding;\r\n        if (appState.vertexArray) {\r\n            gl.bindVertexArray(null);\r\n            appState.vertexArray = null;\r\n        }\r\n        gl.bindBuffer(binding, this.buffer);\r\n        gl.bufferSubData(binding, 0, data);\r\n        gl.bindBuffer(binding, null);\r\n        return this;\r\n    }\r\n    delete() {\r\n        if (this.buffer) {\r\n            this.gl.deleteBuffer(this.buffer);\r\n            this.buffer = null;\r\n        }\r\n        return this;\r\n    }\r\n}\r\n//# sourceMappingURL=VertexBuffer.js.map","import { enableBlend, setBlendModeNormal } from './Blend';\r\nimport { DrawCall } from './DrawCall';\r\nimport { Framebuffer } from './Framebuffer';\r\nimport { Program } from './Program';\r\nimport { Query } from './Query';\r\nimport { Renderbuffer } from './Renderbuffer';\r\nimport { Texture } from './Texture';\r\nimport { UniformBuffer } from './UniformBuffer';\r\nimport { VertexArray } from './VertexArray';\r\nimport { VertexBuffer } from './VertexBuffer';\r\nexport class WebGL2Renderer {\r\n    constructor(canvas, contextAttributes) {\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.viewport = {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        };\r\n        this.currentDrawCalls = 0;\r\n        this.contextLostExt = null;\r\n        this.contextRestoredHandler = null;\r\n        const gl = canvas.getContext('webgl2', contextAttributes);\r\n        this.gl = gl;\r\n        this.canvas = canvas;\r\n        this.setState();\r\n        this.initExtensions();\r\n        this.width = gl.drawingBufferWidth;\r\n        this.height = gl.drawingBufferHeight;\r\n        this.setViewport(0, 0, this.width, this.height);\r\n        enableBlend(gl);\r\n        setBlendModeNormal(gl);\r\n        this.setDepthTest(false);\r\n        // tslint:disable-next-line: no-bitwise\r\n        this.clearBits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT;\r\n        this.contextLostExt = null;\r\n        this.contextRestoredHandler = null;\r\n        canvas.addEventListener('webglcontextlost', (e) => {\r\n            e.preventDefault();\r\n        });\r\n        canvas.addEventListener('webglcontextrestored', () => {\r\n            this.initExtensions();\r\n            if (this.contextRestoredHandler) {\r\n                this.contextRestoredHandler();\r\n            }\r\n        });\r\n    }\r\n    setState() {\r\n        const gl = this.gl;\r\n        const maxTextureUnits = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\r\n        const maxUniformBuffers = gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS);\r\n        const textureAnisotropy = gl.getExtension('EXT_texture_filter_anisotropic');\r\n        this.state = {\r\n            program: null,\r\n            vertexArray: null,\r\n            transformFeedback: null,\r\n            activeTexture: -1,\r\n            textures: new Array(maxTextureUnits),\r\n            uniformBuffers: new Array(maxUniformBuffers),\r\n            freeUniformBufferBases: [],\r\n            drawFramebuffer: null,\r\n            readFramebuffer: null,\r\n            extensions: {\r\n                debugShaders: gl.getExtension('WEBGL_debug_shaders'),\r\n                multiDrawInstanced: gl.getExtension('WEBGL_multi_draw_instanced')\r\n            },\r\n            maxTextureUnits,\r\n            maxUniformBuffers,\r\n            maxUniforms: Math.min(gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS), gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS)),\r\n            textureAnisotropy,\r\n            maxTextureAnisotropy: (textureAnisotropy) ? gl.getParameter(textureAnisotropy.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1,\r\n            samples: gl.getParameter(gl.SAMPLES),\r\n            parallelShaderCompile: Boolean(gl.getExtension('KHR_parallel_shader_compile')),\r\n            multiDrawInstanced: Boolean(gl.getExtension('WEBGL_multi_draw_instanced'))\r\n        };\r\n        return this;\r\n    }\r\n    loseContext() {\r\n        if (this.contextLostExt) {\r\n            this.contextLostExt.loseContext();\r\n        }\r\n        return this;\r\n    }\r\n    restoreContext() {\r\n        if (this.contextLostExt) {\r\n            this.contextLostExt.restoreContext();\r\n        }\r\n        return this;\r\n    }\r\n    onContextRestored(callback) {\r\n        this.contextRestoredHandler = callback;\r\n        return this;\r\n    }\r\n    initExtensions() {\r\n        const gl = this.gl;\r\n        const compressed = 'WEBGL_compressed_texture_';\r\n        const timer = 'EXT_disjoint_timer_query';\r\n        const extensions = [\r\n            'OES_texture_float_linear',\r\n            'EXT_color_buffer_float',\r\n            'EXT_texture_filter_anisotropic',\r\n            compressed + 's3tc',\r\n            compressed + 's3tc_srgb',\r\n            compressed + 'etc',\r\n            compressed + 'astc',\r\n            compressed + 'pvrtc',\r\n            timer,\r\n            timer + '_webgl2',\r\n            'KHR_parallel_shader_compile' // draft extension\r\n        ];\r\n        extensions.forEach((ext) => {\r\n            gl.getExtension(ext);\r\n        });\r\n        this.contextLostExt = gl.getExtension('WEBGL_lose_context');\r\n    }\r\n    setViewport(x, y, width, height) {\r\n        const viewport = this.viewport;\r\n        if (viewport.width !== width || viewport.height !== height || viewport.x !== x || viewport.y !== y) {\r\n            viewport.x = x;\r\n            viewport.y = y;\r\n            viewport.width = width;\r\n            viewport.height = height;\r\n            this.gl.viewport(x, y, width, height);\r\n        }\r\n        return this;\r\n    }\r\n    setDefaultViewport() {\r\n        this.setViewport(0, 0, this.width, this.height);\r\n        return this;\r\n    }\r\n    resize(width, height) {\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n        this.width = this.gl.drawingBufferWidth;\r\n        this.height = this.gl.drawingBufferHeight;\r\n        this.setViewport(0, 0, this.width, this.height);\r\n        return this;\r\n    }\r\n    setDepthTest(value = true) {\r\n        const gl = this.gl;\r\n        if (value) {\r\n            gl.enable(gl.DEPTH_TEST);\r\n        }\r\n        else {\r\n            gl.disable(gl.DEPTH_TEST);\r\n        }\r\n        return this;\r\n    }\r\n    setColorMask(r, g, b, a) {\r\n        this.gl.colorMask(r, g, b, a);\r\n        return this;\r\n    }\r\n    setClearColor(r, g, b, a) {\r\n        this.gl.clearColor(r, g, b, a);\r\n        return this;\r\n    }\r\n    setClearMask(mask) {\r\n        this.clearBits = mask;\r\n        return this;\r\n    }\r\n    clear() {\r\n        this.gl.clear(this.clearBits);\r\n        return this;\r\n    }\r\n    getX(x) {\r\n        return x / this.width * 2 - 1;\r\n    }\r\n    getY(y) {\r\n        return y / this.height * -2 + 1;\r\n    }\r\n    getXY(x, y) {\r\n        return {\r\n            x: x / this.width * 2 - 1,\r\n            y: y / this.height * -2 + 1\r\n        };\r\n    }\r\n    getQuadPosition(x, y, width, height) {\r\n        const TL = this.getXY(x, y);\r\n        const TR = this.getXY(x + width, y);\r\n        const BL = this.getXY(x, y + height);\r\n        const BR = this.getXY(x + width, y + height);\r\n        return new Float32Array([\r\n            TL.x, TL.y,\r\n            TR.x, TR.y,\r\n            BL.x, BL.y,\r\n            BL.x, BL.y,\r\n            TR.x, TR.y,\r\n            BR.x, BR.y\r\n        ]);\r\n    }\r\n    createProgram(vsSource, fsSource) {\r\n        const program = new Program(this.gl, this.state, vsSource, fsSource);\r\n        program.link().checkLinkage();\r\n        return program;\r\n    }\r\n    createVertexArray() {\r\n        return new VertexArray(this.gl, this.state);\r\n    }\r\n    createVertexBuffer(type, itemSize, data, usage) {\r\n        return new VertexBuffer(this.gl, this.state, type, itemSize, data, usage);\r\n    }\r\n    createMatrixBuffer(type, data, usage = this.gl.STATIC_DRAW) {\r\n        return new VertexBuffer(this.gl, this.state, type, 0, data, usage);\r\n    }\r\n    createInterleavedBuffer(bytesPerVertex, data, usage = this.gl.STATIC_DRAW) {\r\n        return new VertexBuffer(this.gl, this.state, null, bytesPerVertex, data, usage);\r\n    }\r\n    createIndexBuffer(type, itemSize, data, usage = this.gl.STATIC_DRAW) {\r\n        return new VertexBuffer(this.gl, this.state, type, itemSize, data, usage, true);\r\n    }\r\n    createUniformBuffer(layout, usage = this.gl.DYNAMIC_DRAW) {\r\n        return new UniformBuffer(this.gl, this.state, layout, usage);\r\n    }\r\n    createDrawCall(program, vertexArray) {\r\n        return new DrawCall(this.gl, this.state, program, vertexArray);\r\n    }\r\n    createFramebuffer() {\r\n        return new Framebuffer(this.gl, this.state);\r\n    }\r\n    createQuery(target) {\r\n        return new Query(this.gl, target);\r\n    }\r\n    createRenderbuffer(width, height, internalFormat, samples = 0) {\r\n        return new Renderbuffer(this.gl, width, height, internalFormat, samples);\r\n    }\r\n    createEmptyTexture2D(width, height, options = {}) {\r\n        return new Texture(this.gl, this.state, this.gl.TEXTURE_2D, null, width, height, 0, false, options);\r\n    }\r\n    createTexture2D(image, width, height, options = {}) {\r\n        if (!width && image && image.width) {\r\n            width = image.width;\r\n        }\r\n        if (!height && image && image.height) {\r\n            height = image.height;\r\n        }\r\n        return new Texture(this.gl, this.state, this.gl.TEXTURE_2D, image, width, height, 0, false, options);\r\n    }\r\n}\r\n//# sourceMappingURL=WebGL2Renderer.js.map","export var BaseLoaderState;\r\n(function (BaseLoaderState) {\r\n    BaseLoaderState[BaseLoaderState[\"IDLE\"] = 0] = \"IDLE\";\r\n    BaseLoaderState[BaseLoaderState[\"LOADING\"] = 1] = \"LOADING\";\r\n    BaseLoaderState[BaseLoaderState[\"PROCESSING\"] = 2] = \"PROCESSING\";\r\n    BaseLoaderState[BaseLoaderState[\"COMPLETE\"] = 3] = \"COMPLETE\";\r\n    BaseLoaderState[BaseLoaderState[\"SHUTDOWN\"] = 4] = \"SHUTDOWN\";\r\n    BaseLoaderState[BaseLoaderState[\"DESTROYED\"] = 5] = \"DESTROYED\";\r\n})(BaseLoaderState || (BaseLoaderState = {}));\r\n//# sourceMappingURL=BaseLoaderState.js.map","export var FileState;\r\n(function (FileState) {\r\n    FileState[FileState[\"PENDING\"] = 0] = \"PENDING\";\r\n    FileState[FileState[\"LOADING\"] = 1] = \"LOADING\";\r\n    FileState[FileState[\"LOADED\"] = 2] = \"LOADED\";\r\n    FileState[FileState[\"FAILED\"] = 3] = \"FAILED\";\r\n    FileState[FileState[\"PROCESSING\"] = 4] = \"PROCESSING\";\r\n    FileState[FileState[\"ERRORED\"] = 5] = \"ERRORED\";\r\n    FileState[FileState[\"COMPLETE\"] = 6] = \"COMPLETE\";\r\n    FileState[FileState[\"DESTROYED\"] = 7] = \"DESTROYED\";\r\n    FileState[FileState[\"POPULATED\"] = 8] = \"POPULATED\";\r\n    FileState[FileState[\"TIMED_OUT\"] = 9] = \"TIMED_OUT\";\r\n    FileState[FileState[\"ABORTED\"] = 10] = \"ABORTED\";\r\n})(FileState || (FileState = {}));\r\n//# sourceMappingURL=FileState.js.map","export function XHRLoader(file) {\r\n    const xhr = new XMLHttpRequest();\r\n    file.xhrLoader = xhr;\r\n    const config = file.xhrSettings;\r\n    xhr.open('GET', file.url, config.async, config.username, config.password);\r\n    xhr.responseType = config.responseType;\r\n    xhr.timeout = config.timeout;\r\n    xhr.setRequestHeader('X-Requested-With', config.requestedWith);\r\n    if (config.header && config.headerValue) {\r\n        xhr.setRequestHeader(config.header, config.headerValue);\r\n    }\r\n    if (config.overrideMimeType) {\r\n        xhr.overrideMimeType(config.overrideMimeType);\r\n    }\r\n    const onLoadStart = (event) => file.onLoadStart(event);\r\n    const onLoad = (event) => file.onLoad(event);\r\n    const onLoadEnd = (event) => file.onLoadEnd(event);\r\n    const onProgress = (event) => file.onProgress(event);\r\n    const onTimeout = (event) => file.onTimeout(event);\r\n    const onAbort = (event) => file.onAbort(event);\r\n    const onError = (event) => file.onError(event);\r\n    const eventMap = new Map([\r\n        ['loadstart', onLoadStart],\r\n        ['load', onLoad],\r\n        ['loadend', onLoadEnd],\r\n        ['progress', onProgress],\r\n        ['timeout', onTimeout],\r\n        ['abort', onAbort],\r\n        ['error', onError]\r\n    ]);\r\n    for (const [key, value] of eventMap) {\r\n        xhr.addEventListener(key, value);\r\n    }\r\n    file.resetXHR = () => {\r\n        for (const [key, value] of eventMap) {\r\n            xhr.removeEventListener(key, value);\r\n        }\r\n        // xhr.removeEventListener('loadstart', onLoadStart);\r\n        // xhr.removeEventListener('load', onLoad);\r\n        // xhr.removeEventListener('loadend', onLoadEnd);\r\n        // xhr.removeEventListener('progress', onProgress);\r\n        // xhr.removeEventListener('timeout', onTimeout);\r\n        // xhr.removeEventListener('abort', onAbort);\r\n        // xhr.removeEventListener('error', onError);\r\n    };\r\n    // xhr.addEventListener('loadstart', onLoadStart);\r\n    // xhr.addEventListener('load', onLoad);\r\n    // xhr.addEventListener('loadend', onLoadEnd);\r\n    // xhr.addEventListener('progress', onProgress);\r\n    // xhr.addEventListener('timeout', onTimeout);\r\n    // xhr.addEventListener('abort', onAbort);\r\n    // xhr.addEventListener('error', onError);\r\n    //  After a successful request, the xhr.response property will contain the requested data as a DOMString,\r\n    //  ArrayBuffer, Blob, or Document (depending on what was set for responseType.)\r\n    xhr.send();\r\n}\r\n//# sourceMappingURL=XHRLoader.js.map","export function XHRSettings(config = { responseType: 'blob', async: true, username: '', password: '', timeout: 0 }) {\r\n    // Before sending a request, set the xhr.responseType to \"text\",\r\n    // \"arraybuffer\", \"blob\", or \"document\", depending on your data needs.\r\n    // Note, setting xhr.responseType = '' (or omitting) will default the response to \"text\".\r\n    return {\r\n        //  Ignored by the Loader, only used by File.\r\n        responseType: config.responseType,\r\n        async: config.async,\r\n        //  credentials\r\n        username: config.username,\r\n        password: config.password,\r\n        //  timeout in ms (0 = no timeout)\r\n        timeout: config.timeout,\r\n        //  setRequestHeader\r\n        header: undefined,\r\n        headerValue: undefined,\r\n        requestedWith: 'XMLHttpRequest',\r\n        //  overrideMimeType\r\n        overrideMimeType: undefined\r\n    };\r\n}\r\n//# sourceMappingURL=XHRSettings.js.map","import { FileState } from './FileState';\r\nimport { XHRLoader } from './XHRLoader';\r\nimport { XHRSettings } from './XHRSettings';\r\nexport function File(key, url, type) {\r\n    return {\r\n        key,\r\n        url,\r\n        type,\r\n        xhrLoader: undefined,\r\n        xhrSettings: XHRSettings(),\r\n        data: null,\r\n        state: FileState.PENDING,\r\n        bytesLoaded: 0,\r\n        bytesTotal: 0,\r\n        percentComplete: 0,\r\n        load() {\r\n            console.log('File.load', this.key);\r\n            this.state = FileState.PENDING;\r\n            XHRLoader(this);\r\n            return new Promise((resolve, reject) => {\r\n                this.loaderResolve = resolve;\r\n                this.loaderReject = reject;\r\n            });\r\n        },\r\n        onLoadStart(event) {\r\n            console.log('onLoadStart');\r\n            this.state = FileState.LOADING;\r\n        },\r\n        onLoad(event) {\r\n            console.log('onLoad');\r\n            const xhr = this.xhrLoader;\r\n            const localFileOk = ((xhr.responseURL && xhr.responseURL.indexOf('file://') === 0 && xhr.status === 0));\r\n            let success = !(event.target && xhr.status !== 200) || localFileOk;\r\n            //  Handle HTTP status codes of 4xx and 5xx as errors, even if xhr.onerror was not called.\r\n            if (xhr.readyState === 4 && xhr.status >= 400 && xhr.status <= 599) {\r\n                success = false;\r\n            }\r\n            this.onProcess()\r\n                .then(() => this.onComplete())\r\n                .catch(() => this.onError());\r\n        },\r\n        onLoadEnd(event) {\r\n            console.log('onLoadEnd');\r\n            this.resetXHR();\r\n            this.state = FileState.LOADED;\r\n        },\r\n        onTimeout(event) {\r\n            console.log('onTimeout');\r\n            this.state = FileState.TIMED_OUT;\r\n        },\r\n        onAbort(event) {\r\n            console.log('onAbort');\r\n            this.state = FileState.ABORTED;\r\n        },\r\n        onError(event) {\r\n            console.log('onError');\r\n            this.state = FileState.ERRORED;\r\n            if (this.fileReject) {\r\n                this.fileReject(this);\r\n            }\r\n        },\r\n        onProgress(event) {\r\n            console.log('onProgress');\r\n            if (event.lengthComputable) {\r\n                this.bytesLoaded = event.loaded;\r\n                this.bytesTotal = event.total;\r\n                this.percentComplete = Math.min((event.loaded / event.total), 1);\r\n                console.log(this.percentComplete, '%');\r\n            }\r\n        },\r\n        onProcess() {\r\n            console.log('File.onProcess');\r\n            this.state = FileState.PROCESSING;\r\n            return new Promise((resolve, reject) => {\r\n                resolve();\r\n            });\r\n        },\r\n        onComplete() {\r\n            console.log('onComplete!');\r\n            this.state = FileState.COMPLETE;\r\n            if (this.fileResolve) {\r\n                this.fileResolve(this);\r\n            }\r\n            else if (this.loaderResolve) {\r\n                this.loaderResolve(this);\r\n            }\r\n        },\r\n        onDestroy() {\r\n            this.state = FileState.DESTROYED;\r\n        }\r\n    };\r\n}\r\n//# sourceMappingURL=File.js.map","import { File, FileState } from '@phaserjs/loader';\r\nexport function ImageFile(key, url) {\r\n    if (!url) {\r\n        url = key + '.png';\r\n    }\r\n    const file = File(key, url, 'image');\r\n    file.xhrSettings.responseType = 'blob';\r\n    file.onProcess = () => {\r\n        console.log('ImageFile.onProcess');\r\n        file.state = FileState.PROCESSING;\r\n        const image = new Image();\r\n        file.data = image;\r\n        // if (file.crossOrigin)\r\n        // {\r\n        //     image.crossOrigin = file.crossOrigin;\r\n        // }\r\n        return new Promise((resolve, reject) => {\r\n            image.onload = () => {\r\n                console.log('ImageFile.onload');\r\n                image.onload = null;\r\n                image.onerror = null;\r\n                file.state = FileState.COMPLETE;\r\n                resolve(file);\r\n            };\r\n            image.onerror = (event) => {\r\n                console.log('ImageFile.onerror');\r\n                image.onload = null;\r\n                image.onerror = null;\r\n                file.state = FileState.FAILED;\r\n                reject(file);\r\n            };\r\n            console.log('ImageFile.set src', file.url);\r\n            image.src = file.url;\r\n            //  Image is immediately-available or cached\r\n            if (image.complete && image.width && image.height) {\r\n                console.log('ImageFile.instant');\r\n                image.onload = null;\r\n                image.onerror = null;\r\n                file.state = FileState.COMPLETE;\r\n                resolve(file);\r\n            }\r\n        });\r\n    };\r\n    return file;\r\n}\r\n//# sourceMappingURL=ImageFile.js.map","export class Matrix4 {\r\n    /**\r\n     * Creates an instance of a Matrix4.\r\n     *\r\n     * Format: column-major, when typed out it looks like row-major.\r\n     *\r\n     * @param {number} [m00=1] - Component in column 0, row 0 position (index 0)\r\n     * @param {number} [m01=0] - Component in column 0, row 1 position (index 1)\r\n     * @param {number} [m02=0] - Component in column 0, row 2 position (index 2)\r\n     * @param {number} [m03=0] - Component in column 0, row 3 position (index 3)\r\n     * @param {number} [m10=0] - Component in column 1, row 0 position (index 4)\r\n     * @param {number} [m11=1] - Component in column 1, row 1 position (index 5)\r\n     * @param {number} [m12=0] - Component in column 1, row 2 position (index 6)\r\n     * @param {number} [m13=0] - Component in column 1, row 3 position (index 7)\r\n     * @param {number} [m20=0] - Component in column 2, row 0 position (index 8)\r\n     * @param {number} [m21=0] - Component in column 2, row 1 position (index 9)\r\n     * @param {number} [m22=1] - Component in column 2, row 2 position (index 10)\r\n     * @param {number} [m23=0] - Component in column 2, row 3 position (index 11)\r\n     * @param {number} [m30=0] - Component in column 3, row 0 position (index 12)\r\n     * @param {number} [m31=0] - Component in column 3, row 1 position (index 13)\r\n     * @param {number} [m32=0] - Component in column 3, row 2 position (index 14)\r\n     * @param {number} [m33=1] - Component in column 3, row 3 position (index 15)\r\n     * @memberof Matrix4\r\n     */\r\n    constructor(m00 = 1, m01 = 0, m02 = 0, m03 = 0, m10 = 0, m11 = 1, m12 = 0, m13 = 0, m20 = 0, m21 = 0, m22 = 1, m23 = 0, m30 = 0, m31 = 0, m32 = 0, m33 = 1) {\r\n        this.set(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\r\n    }\r\n    /**\r\n     * Sets the components of this Matrix4.\r\n     *\r\n     * If no parameters are given it resets this Matrix4 to an identity matrix.\r\n     *\r\n     * @param {number} [m00=1] - Component in column 0, row 0 position (index 0)\r\n     * @param {number} [m01=0] - Component in column 0, row 1 position (index 1)\r\n     * @param {number} [m02=0] - Component in column 0, row 2 position (index 2)\r\n     * @param {number} [m03=0] - Component in column 0, row 3 position (index 3)\r\n     * @param {number} [m10=0] - Component in column 1, row 0 position (index 4)\r\n     * @param {number} [m11=1] - Component in column 1, row 1 position (index 5)\r\n     * @param {number} [m12=0] - Component in column 1, row 2 position (index 6)\r\n     * @param {number} [m13=0] - Component in column 1, row 3 position (index 7)\r\n     * @param {number} [m20=0] - Component in column 2, row 0 position (index 8)\r\n     * @param {number} [m21=0] - Component in column 2, row 1 position (index 9)\r\n     * @param {number} [m22=1] - Component in column 2, row 2 position (index 10)\r\n     * @param {number} [m23=0] - Component in column 2, row 3 position (index 11)\r\n     * @param {number} [m30=0] - Component in column 3, row 0 position (index 12)\r\n     * @param {number} [m31=0] - Component in column 3, row 1 position (index 13)\r\n     * @param {number} [m32=0] - Component in column 3, row 2 position (index 14)\r\n     * @param {number} [m33=1] - Component in column 3, row 3 position (index 15)\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    set(m00 = 1, m01 = 0, m02 = 0, m03 = 0, m10 = 0, m11 = 1, m12 = 0, m13 = 0, m20 = 0, m21 = 0, m22 = 1, m23 = 0, m30 = 0, m31 = 0, m32 = 0, m33 = 1) {\r\n        this.m00 = m00;\r\n        this.m01 = m01;\r\n        this.m02 = m02;\r\n        this.m03 = m03;\r\n        this.m10 = m10;\r\n        this.m11 = m11;\r\n        this.m12 = m12;\r\n        this.m13 = m13;\r\n        this.m20 = m20;\r\n        this.m21 = m21;\r\n        this.m22 = m22;\r\n        this.m23 = m23;\r\n        this.m30 = m30;\r\n        this.m31 = m31;\r\n        this.m32 = m32;\r\n        this.m33 = m33;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets all components of this Matrix4 to zero.\r\n     *\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    zero() {\r\n        return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n    }\r\n    /**\r\n     * Resets this Matrix4 to an identity matrix.\r\n     *\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    identity() {\r\n        return this.set();\r\n    }\r\n    /**\r\n     * Returns a new array containg the Matrix4 component values in column-major format.\r\n     *\r\n     * @returns {number[]}\r\n     * @memberof Matrix4\r\n     */\r\n    getArray() {\r\n        return [this.m00, this.m01, this.m02, this.m03, this.m10, this.m11, this.m12, this.m13, this.m20, this.m21, this.m22, this.m23, this.m30, this.m31, this.m32, this.m33];\r\n    }\r\n    /**\r\n     * Sets the values of this Matrix4 based on the given array, or array-like object, such as a Float32.\r\n     *\r\n     * The source must have 16 elements, starting from index 0 through to index 15.\r\n     *\r\n     * @param {number[]} src - The source array to copy the values from.\r\n     * @returns {Matrix4}\r\n     * @memberof Matrix4\r\n     */\r\n    fromArray(src) {\r\n        return this.set(src[0], src[1], src[2], src[3], src[4], src[5], src[6], src[7], src[8], src[9], src[10], src[11], src[12], src[13], src[14], src[15]);\r\n    }\r\n    [Symbol.iterator]() {\r\n        const data = this.getArray();\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix4.js.map","//  Converts the target Matrix4 to be an orthographic projection matrix based on the given bounds, then returns the target Matrix4\r\nexport function Ortho(target, left, right, bottom, top, near, far) {\r\n    const lr = 1 / (left - right);\r\n    const bt = 1 / (bottom - top);\r\n    const nf = 1 / (near - far);\r\n    const m00 = -2 * lr;\r\n    const m11 = -2 * bt;\r\n    const m22 = 2 * nf;\r\n    const m30 = (left + right) * lr;\r\n    const m31 = (top + bottom) * bt;\r\n    const m32 = (far + near) * nf;\r\n    return target.set(m00, 0, 0, 0, 0, m11, 0, 0, 0, 0, m22, 0, m30, m31, m32, 1);\r\n}\r\n//# sourceMappingURL=Ortho.js.map","//  Rotates the target Matrix4 by the angle on its z axis, then returns the target Matrix4\r\nexport function RotateZ(target, angle) {\r\n    const s = Math.sin(angle);\r\n    const c = Math.cos(angle);\r\n    const { m00, m01, m02, m03, m10, m11, m12, m13 } = target;\r\n    target.m00 = m00 * c + m10 * s;\r\n    target.m01 = m01 * c + m11 * s;\r\n    target.m02 = m02 * c + m12 * s;\r\n    target.m03 = m03 * c + m13 * s;\r\n    target.m10 = m10 * c - m00 * s;\r\n    target.m11 = m11 * c - m01 * s;\r\n    target.m12 = m12 * c - m02 * s;\r\n    target.m13 = m13 * c - m03 * s;\r\n    return target;\r\n}\r\n//# sourceMappingURL=RotateZ.js.map","//  Scales the target Matrix4 by the x, y and z values, then returns the target Matrix4\r\nexport function Scale(target, scaleX, scaleY, scaleZ) {\r\n    target.m00 *= scaleX;\r\n    target.m01 *= scaleX;\r\n    target.m02 *= scaleX;\r\n    target.m03 *= scaleX;\r\n    target.m10 *= scaleY;\r\n    target.m11 *= scaleY;\r\n    target.m12 *= scaleY;\r\n    target.m13 *= scaleY;\r\n    target.m20 *= scaleZ;\r\n    target.m21 *= scaleZ;\r\n    target.m22 *= scaleZ;\r\n    target.m23 *= scaleZ;\r\n    return target;\r\n}\r\n//# sourceMappingURL=Scale.js.map","//  Translates the target Matrix4 by the x, y and z values, then returns the target Matrix4\r\nexport function Translate(target, x = 0, y = 0, z = 0) {\r\n    const { m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33 } = target;\r\n    target.m30 = m00 * x + m10 * y + m20 * z + m30;\r\n    target.m31 = m01 * x + m11 * y + m21 * z + m31;\r\n    target.m32 = m02 * x + m12 * y + m22 * z + m32;\r\n    target.m33 = m03 * x + m13 * y + m23 * z + m33;\r\n    return target;\r\n}\r\n//# sourceMappingURL=Translate.js.map","export class Vec2 {\r\n    /**\r\n     * Creates an instance of a Vector2.\r\n     *\r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @memberof Vec2\r\n     */\r\n    constructor(x = 0, y = 0) {\r\n        this.set(x, y);\r\n    }\r\n    /**\r\n     * Sets the components of this Vector2.\r\n     *\r\n     * @param {number} [x=0] - X component\r\n     * @param {number} [y=0] - Y component\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    set(x = 0, y = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets all components of this Vector2 to zero.\r\n     *\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    zero() {\r\n        return this.set();\r\n    }\r\n    /**\r\n     * Returns a new array containg the Vector2 component values.\r\n     *\r\n     * @returns {number[]}\r\n     * @memberof Vec2\r\n     */\r\n    getArray() {\r\n        return [this.x, this.y];\r\n    }\r\n    /**\r\n     * Sets the values of this Vector2 based on the given array, or array-like object, such as a Float32.\r\n     *\r\n     * The source must have 2 elements, starting from index 0 through to index 1.\r\n     *\r\n     * @param {number[]} src - The source array to copy the values from.\r\n     * @returns {Vec2}\r\n     * @memberof Vec2\r\n     */\r\n    fromArray(src) {\r\n        return this.set(src[0], src[1]);\r\n    }\r\n    [Symbol.iterator]() {\r\n        const data = this.getArray();\r\n        return data[Symbol.iterator]();\r\n    }\r\n}\r\n//# sourceMappingURL=Vec2.js.map","import { WebGL2Renderer } from '@phaserjs/renderer-webgl2';\r\nimport { ImageFile } from '@phaserjs/loader-filetypes';\r\nimport { Ortho, Matrix4, Translate, RotateX, RotateY, RotateZ, Scale } from '@phaserjs/math-matrix4';\r\nimport { LookAt, Multiply, Perspective } from '@phaserjs/math-matrix4-funcs';\r\nimport { Vec2 } from '@phaserjs/math-vec2';\r\nimport { Vec3 } from '@phaserjs/math-vec3';\r\n\r\nfunction createQuad (x: number, y: number, width: number, height: number)\r\n{\r\n    const TL = new Vec2(x, y);\r\n    const TR = new Vec2(x + width, y);\r\n    const BL = new Vec2(x, y + height);\r\n    const BR = new Vec2(x + width, y + height);\r\n\r\n    //  flipped from v3 and it works fine!\r\n    const UVTL = new Vec2(0, 1);\r\n    const UVTR = new Vec2(1, 1);\r\n    const UVBL = new Vec2(0, 0);\r\n    const UVBR = new Vec2(1, 0);\r\n\r\n    return {\r\n        position: new Float32Array([\r\n            TL.x, TL.y,\r\n            TR.x, TR.y,\r\n            BL.x, BL.y,\r\n            BL.x, BL.y,\r\n            TR.x, TR.y,\r\n            BR.x, BR.y\r\n        ]),\r\n        uvs: new Float32Array([\r\n            UVTL.x, UVTL.y,\r\n            UVTR.x, UVTR.y,\r\n            UVBL.x, UVBL.y,\r\n            UVBL.x, UVBL.y,\r\n            UVTR.x, UVTR.y,\r\n            UVBR.x, UVBR.y\r\n        ]),\r\n    }\r\n}\r\n\r\nconst vs = `#version 300 es\r\nprecision mediump float;\r\n\r\nuniform mat4 uModelViewMatrix;\r\nuniform mat4 uProjectionMatrix;\r\n\r\nlayout(location=0) in vec3 aVertexPosition;\r\nlayout(location=1) in vec2 aVertexNormal;\r\n\r\n// uniform SceneUniforms {\r\n//     mat4 viewProj;\r\n// };\r\n\r\nout vec2 outUV;\r\n\r\nvoid main()\r\n{\r\n    outUV = aVertexNormal;\r\n\r\n    //  Transformed vertex position\r\n    vec4 vertex = uModelViewMatrix * vec4(aVertexPosition, 1.0);\r\n\r\n    //  Final vertex position\r\n    gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\r\n}\r\n`;\r\n\r\nconst fs = `#version 300 es\r\nprecision highp float;\r\n\r\n// layout(std140, column_major) uniform;\r\n\r\n// uniform SceneUniforms {\r\n//     mat4 viewProj;\r\n// };\r\n\r\nuniform sampler2D tex;\r\n\r\nin vec2 outUV;\r\n\r\nout vec4 fragColor;\r\n\r\nvoid main() {\r\n    fragColor = texture(tex, outUV);\r\n    // fragColor = vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n`;\r\n\r\nlet app = new WebGL2Renderer(document.getElementById('game') as HTMLCanvasElement);\r\n\r\napp.setClearColor(0.2, 0.4, 0, 1);\r\n\r\napp.gl.disable(app.gl.CULL_FACE);\r\napp.gl.disable(app.gl.DEPTH_TEST);\r\n\r\nlet program = app.createProgram(vs, fs);\r\n\r\nlet quad = createQuad(0, 0, 512, 512);\r\n\r\nlet positions = app.createVertexBuffer(app.gl.FLOAT, 2, quad.position);\r\nlet uvs = app.createVertexBuffer(app.gl.FLOAT, 2, quad.uvs);\r\n\r\nlet triangleArray = app.createVertexArray().vertexAttributeBuffer(0, positions).vertexAttributeBuffer(1, uvs);\r\n\r\n//  WORKING ORTHO:\r\nlet projectionMatrix = new Matrix4();\r\nOrtho(projectionMatrix, 0, app.width, app.height, 0, 0, 1000);\r\n\r\n//  WORKING PERSPECTIVE (although Scale needs sorting)\r\n\r\n/*\r\nlet cameraPosition = new Vec3(256, 256, -512);\r\nlet lookPosition = new Vec3(256, 256, 0);\r\nlet orientation = new Vec3(0, 1, 0);\r\n\r\nlet viewMatrix = LookAt(cameraPosition, lookPosition, orientation);\r\n\r\nlet p = Perspective(180, app.width / app.height, 0, 1000);\r\n\r\nlet projectionMatrix = Multiply(p, viewMatrix);\r\n*/\r\n\r\n\r\n\r\nlet modelViewMatrix = new Matrix4();\r\n\r\n// console.log(viewProj.getArray());\r\n\r\n// let sub = app.createUniformBuffer([\r\n//     app.gl.FLOAT_MAT4\r\n// ]);\r\n\r\n// sub.set(0, mvpMatrix.getArray());\r\n// sub.update();\r\n\r\n// let modelMatrix = new Matrix4();\r\n\r\nlet x = 0;\r\nlet y = 0;\r\nlet z = 0;\r\nlet r = 0;\r\nlet scaleX = 1;\r\nlet scaleY = 1;\r\n\r\n//  512 x 512\r\n\r\n// let rx = 0;\r\n// let ry = 0;\r\n\r\nImageFile('stone', '../assets/512x512.png').load().then((file) => {\r\n\r\n    let t = app.createTexture2D(file.data);\r\n\r\n    let drawCall = app.createDrawCall(program, triangleArray)\r\n\r\n    drawCall.uniform('uModelViewMatrix', modelViewMatrix.getArray());\r\n    drawCall.uniform('uProjectionMatrix', projectionMatrix.getArray());\r\n\r\n    // drawCall.uniformBlock('SceneUniforms', sub);\r\n\r\n    drawCall.texture('tex', t);\r\n\r\n    function render ()\r\n    {\r\n        modelViewMatrix.identity();\r\n\r\n        Translate(modelViewMatrix, x, y, z);\r\n        RotateZ(modelViewMatrix, r);\r\n        Scale(modelViewMatrix, scaleX, scaleY, 1);\r\n\r\n        drawCall.uniform('uModelViewMatrix', modelViewMatrix.getArray());\r\n\r\n        app.clear();\r\n    \r\n        drawCall.draw();\r\n\r\n        requestAnimationFrame(render);\r\n    }\r\n\r\n    render();\r\n\r\n});\r\n"],"names":["createQuad","x","y","width","height","TL","Vec2","TR","BL","BR","UVTL","UVTR","UVBL","UVBR","position","Float32Array","uvs","vs","fs","app","WebGL2Renderer","document","getElementById","setClearColor","gl","disable","CULL_FACE","DEPTH_TEST","program","createProgram","quad","positions","createVertexBuffer","FLOAT","triangleArray","createVertexArray","vertexAttributeBuffer","projectionMatrix","Matrix4","Ortho","modelViewMatrix","z","r","scaleX","scaleY","ImageFile","load","then","file","t","createTexture2D","data","drawCall","createDrawCall","uniform","getArray","texture","render","identity","Translate","RotateZ","Scale","clear","draw","requestAnimationFrame"],"mappings":"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"}